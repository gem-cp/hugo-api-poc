<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head><script src="/hugo-api-poc/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=hugo-api-poc/livereload" data-no-instant defer></script>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="/hugo-api-poc/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/hugo-api-poc/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/hugo-api-poc/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/hugo-api-poc/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/hugo-api-poc/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/hugo-api-poc/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/hugo-api-poc/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/hugo-api-poc/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/hugo-api-poc/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/hugo-api-poc/favicons/android-192x192.png" sizes="192x192">

<title>ZETA API v1 | API PoC and Integrated Docs</title>
<meta name="description" content="TOC {:toc} ZETA API v1 {::nomarkdown} {% include badge.html name=“zeta_api” %} {:/nomarkdown}
Die ZETA API ermöglicht es ZETA Clients, auf geschützte Ressourcen zuzugreifen und dabei Sicherheits- und Authentifizierungsmechanismen zu nutzen. Der ZETA Client nutzt Endpunkte des ZETA Guard für die Client-Registrierung, Authentifizierung und Autorisierung.
Stationäre Clients verwenden bei der Authentifizierung Endpunkte des Konnektors/TI-Gateways und des ZETA Attestation Service.
Mobile Clients verwenden Endpunkte der betriebssystem-spezifischen Attestierung. Die Authentifizierung erfolgt mit OpenID Connect (OIDC) und der ZETA Guard API.">
<meta property="og:url" content="http://localhost:1313/hugo-api-poc/zeta/api/v1/">
  <meta property="og:site_name" content="API PoC and Integrated Docs">
  <meta property="og:title" content="ZETA API v1">
  <meta property="og:description" content="TOC {:toc} ZETA API v1 {::nomarkdown} {% include badge.html name=“zeta_api” %} {:/nomarkdown}
Die ZETA API ermöglicht es ZETA Clients, auf geschützte Ressourcen zuzugreifen und dabei Sicherheits- und Authentifizierungsmechanismen zu nutzen. Der ZETA Client nutzt Endpunkte des ZETA Guard für die Client-Registrierung, Authentifizierung und Autorisierung.
Stationäre Clients verwenden bei der Authentifizierung Endpunkte des Konnektors/TI-Gateways und des ZETA Attestation Service.
Mobile Clients verwenden Endpunkte der betriebssystem-spezifischen Attestierung. Die Authentifizierung erfolgt mit OpenID Connect (OIDC) und der ZETA Guard API.">
  <meta property="og:locale" content="de_de">
  <meta property="og:type" content="article">
    <meta property="article:section" content="zeta">

  <meta itemprop="name" content="ZETA API v1">
  <meta itemprop="description" content="TOC {:toc} ZETA API v1 {::nomarkdown} {% include badge.html name=“zeta_api” %} {:/nomarkdown}
Die ZETA API ermöglicht es ZETA Clients, auf geschützte Ressourcen zuzugreifen und dabei Sicherheits- und Authentifizierungsmechanismen zu nutzen. Der ZETA Client nutzt Endpunkte des ZETA Guard für die Client-Registrierung, Authentifizierung und Autorisierung.
Stationäre Clients verwenden bei der Authentifizierung Endpunkte des Konnektors/TI-Gateways und des ZETA Attestation Service.
Mobile Clients verwenden Endpunkte der betriebssystem-spezifischen Attestierung. Die Authentifizierung erfolgt mit OpenID Connect (OIDC) und der ZETA Guard API.">
  <meta itemprop="wordCount" content="6761">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="ZETA API v1">
  <meta name="twitter:description" content="TOC {:toc} ZETA API v1 {::nomarkdown} {% include badge.html name=“zeta_api” %} {:/nomarkdown}
Die ZETA API ermöglicht es ZETA Clients, auf geschützte Ressourcen zuzugreifen und dabei Sicherheits- und Authentifizierungsmechanismen zu nutzen. Der ZETA Client nutzt Endpunkte des ZETA Guard für die Client-Registrierung, Authentifizierung und Autorisierung.
Stationäre Clients verwenden bei der Authentifizierung Endpunkte des Konnektors/TI-Gateways und des ZETA Attestation Service.
Mobile Clients verwenden Endpunkte der betriebssystem-spezifischen Attestierung. Die Authentifizierung erfolgt mit OpenID Connect (OIDC) und der ZETA Guard API.">
<link href="/hugo-api-poc/scss/main.css" rel="stylesheet">
<script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous"></script>

  </head>
  <body class="td-page">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/hugo-api-poc/"><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="navbar-brand__name">API PoC and Integrated Docs</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/hugo-api-poc/"><span>Home</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/hugo-api-poc/vsdm2/"><span>VSDM2</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/hugo-api-poc/zeta/"><span>ZETA</span></a>
      </li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-default td-outer">
      <main role="main" class="td-main">
        <ul>
<li>TOC
{:toc}</li>
</ul>
<h2 id="zeta-api-v1">ZETA API v1</h2>
<p>{::nomarkdown}
{% include badge.html name=&ldquo;zeta_api&rdquo; %}
{:/nomarkdown}</p>
<p>Die ZETA API ermöglicht es ZETA Clients, auf geschützte Ressourcen zuzugreifen und dabei Sicherheits- und Authentifizierungsmechanismen zu nutzen.
Der ZETA Client nutzt Endpunkte des ZETA Guard für die Client-Registrierung, Authentifizierung und Autorisierung.</p>
<p>Stationäre Clients verwenden bei der Authentifizierung Endpunkte des Konnektors/TI-Gateways und des ZETA Attestation Service.</p>
<p>Mobile Clients verwenden Endpunkte der betriebssystem-spezifischen Attestierung. Die Authentifizierung erfolgt mit OpenID Connect (OIDC) und der ZETA Guard API.</p>
<p>Die ZETA API ist so konzipiert, dass sie eine sichere und flexible Interaktion zwischen ZETA Clients und geschützten Ressourcen ermöglicht. ZETA basiert auf den Standards des OAuth 2.0 Frameworks und erweitert es um spezifische Anforderungen der gematik.</p>
<hr>
<h2 id="voraussetzungen-für-die-zeta-client-nutzung">Voraussetzungen für die ZETA Client Nutzung</h2>
<p>Folgende Voraussetzungen müssen für die Nutzung des ZETA Clients erfüllt sein:</p>
<ul>
<li>Der <strong>FQDN des Resource Servers</strong> wird vom ZETA Client benötigt, um die ZETA Guard API zu erreichen.</li>
<li>Die <a href="https://download.tsl.ti-dienste.de/ECC/ROOT-CA/roots.json">roots.json</a> Datei wird vom ZETA Client benötigt, um die Trust Chain zu validieren. Diese Datei muss wöchentlich aktualisiert werden.</li>
</ul>
<p>Zusätzlich gibt es anwendungsspezifische Voraussetzungen, die für die Nutzung der ZETA Guard API erforderlich sind.</p>
<ul>
<li><strong>VSDM2:</strong> Für VSDM2 Requests wird ein PoPP (Proof of Patient Presence) Token benötigt. Das PoPP Token muss im <a href="https://gemspec.gematik.de/docs/gemSpec/gemSpec_ZETA/latest/#A_25669">Header PoPP</a> an den ZETA Client übergeben werden.</li>
</ul>
<h2 id="ablauf">Ablauf</h2>
<p>Abhängig vom Zustand des ZETA Clients müssen verschiedene Teilabläufe ausgeführt werden, oder können übersprungen werden. Die ZETA API besteht aus mehreren Endpunkten, die verschiedene Funktionen bereitstellen. Diese Endpunkte sind in verschiedene Unter-Abläufe aufgeteilt:</p>
<ul>
<li><strong>Konfiguration und Discovery:</strong> Der ZETA Client muss die Konfiguration des ZETA Guards ermitteln, um die richtigen Endpunkte zu erreichen.</li>
<li><strong>Client-Registrierung:</strong> Jeder ZETA Client muss sich einmalig beim ZETA Guard registrieren, um eine <code>client_id</code> zu erhalten und seinen öffentlichen Schlüssel zu hinterlegen.</li>
<li><strong>Authentifizierung und Autorisierung:</strong> Der Client muss sich authentifizieren und die Integrität seiner Plattform nachweisen. Zusätzlich muss sich der Nutzer oder beim Primärsystem die Organisation authentifizieren, um ein Access Token für den Zugriff auf geschützte Ressourcen zu erhalten.</li>
</ul>
<p>Der Gesamtprozess beginnt damit, dass ein <strong>Nutzer</strong> auf einen Endpunkt eines Resource Servers zugreifen möchte. Dieser Zugriff wird über das Primärsystem vom <strong>ZETA Client</strong> im Auftrag des Nutzers ausgeführt; siehe folgende Abbildung.</p>
<p>![tpm-attestation-and-token-exchange-overview]({{ site.baseurl }}/images/tpm-attestation-and-token-exchange/tpm-attestation-and-token-exchange-overview.svg)</p>
<p style="font-size:0.9em; text-align:center;"><em>Abbildung 1: Ablauf TPM Attestation und Token Exchange Überblick</em></p>
<hr>
<h3 id="konfiguration-und-discovery">Konfiguration und Discovery</h3>
<p>In dieser Phase ermittelt der ZETA Client die notwendigen Endpunkte und Konfigurationen von den ZETA Guard Komponenten (PEP http Proxy und PDP Authorization Server). Der Client fragt bekannte Endpunkte (<code>/.well-known/oauth-protected-resource</code> und <code>/.well-known/oauth-authorization-server</code>) ab, um die Konfiguration des Resource Servers und des Authorization Servers zu erhalten. Das folgende Bild zeigt den Ablauf.</p>
<p>![tpm-attestation-and-token-exchange-overview]({{ site.baseurl }}/images/tpm-attestation-and-token-exchange/discovery-and-configuration.svg)</p>
<p style="font-size:0.9em; text-align:center;"><em>Abbildung 2: Ablauf Discovery and Configuration</em></p>
<h3 id="client-registrierung">Client-Registrierung</h3>
<h4 id="stationäre-clients">Stationäre Clients</h4>
<p>Jeder ZETA Client muss sich am ZETA Guard registrieren, über den er auf geschützte Ressourcen zugreifen möchte. Dieser Prozess findet <strong>einmalig pro ZETA Guard-Instanz</strong> statt. Der gesamte Prozess ist zweistufig, um die administrative Einrichtung von der technischen Inbetriebnahme zu trennen:</p>
<ul>
<li><strong>Initiale Registrierung:</strong> Der Client erzeugt ein langlebiges kryptographisches Schlüsselpaar (<strong>Client Instance Key</strong>), sendet den öffentlichen Teil an den Authorization Server und erhält im Gegenzug eine <code>client_id</code>. Der Client ist danach im System bekannt, aber sein Status ist <code>pending_attestation</code>, d.h. er ist noch nicht für den Zugriff auf Ressourcen freigeschaltet.</li>
<li><strong>Aktivierung (Erster Token Exchange):</strong> Der Client wird aktiviert, indem er zum ersten Mal einen Token Exchange mit einer erfolgreichen <strong>Attestierung</strong> durchführt. Damit beweist er nicht nur den Besitz des privaten Schlüssels, sondern (bei der TPM-Attestierung) auch die Integrität der Plattform, auf der er läuft. Nach erfolgreicher Prüfung wird sein Status im ZETA Guard auf <code>active</code> gesetzt.</li>
</ul>
<p>Die Client Registrierung ist in der folgenden Abbildung dargestellt.</p>
<p>![Ablauf Client Registrierung]({{ site.baseurl }}/images/tpm-attestation-and-token-exchange/dynamic-client-registration.svg)</p>
<p style="font-size:0.9em; text-align:center;"><em>Abbildung 3: Ablauf Client Registrierung</em></p>
<p>Für die initiale Registrierung sendet der ZETA Client eine Anfrage an den Dynamic Client Registration (DCR) Endpoint. Diese Anfrage enthält alle notwendigen Metadaten, um den Client für die <code>private_key_jwt</code> Authentifizierungsmethode vorzubereiten:</p>
<ul>
<li><code>client_name</code>: Ein für Menschen lesbarer Name für den Client.</li>
<li><code>token_endpoint_auth_method</code>: Die geplante Authentifizierungsmethode, hier <code>private_key_jwt</code>.</li>
<li><code>grant_types</code>: Die erlaubten Grant Types (z.B. <code>urn:ietf:params:oauth:grant-type:token-exchange</code>, <code>refresh_token</code>).</li>
<li><code>jwks</code>: Ein JSON Web Key Set, das den <strong>öffentlichen Client Instance Key</strong> enthält. Dieser Schlüssel wird vom Authorization Server verwendet, um die Signatur der Client Assertions zu überprüfen.</li>
</ul>
<hr>
<h4 id="mobile-clients">Mobile Clients</h4>
<p><em>Hinweis:</em> Der Prozess für Mobile Clients wird in zukünftigen Versionen der API detaillierter beschrieben, sobald die Entwicklung von ZETA Stufe 2 abgeschlossen ist.</p>
<h3 id="authentifizierung-und-autorisierung">Authentifizierung und Autorisierung</h3>
<p>Nach erfolgreicher Registrierung besitzt der ZETA Client eine <code>client_id</code> und ein zugehöriges Schlüsselpaar. Um auf einen Fachdienst zugreifen zu können, benötigt der Client ein Access Token vom Authorization Server (AS). Stationäre ZETA Clients verwenden dafür den Token Exchange Flow, während mobile ZETA Clients den Authorization Code Flow mit OpenID Connect nutzen.</p>
<h4 id="stationäre-clients-1">Stationäre Clients</h4>
<p>Die Authentifizierung und Autorisierung für stationäre Clients unterscheidet zwei Hauptfälle:</p>
<ol>
<li><strong>Token-Austausch mit Attestierung:</strong> Hier wird die Identität der Institution (mittels <code>subject_token</code> von der SM(C)-B) nachgewiesen und die Integrität des Clients durch eine Attestierung überprüft. Dieser aufwändigere Prozess wird zu Beginn einer neuen Session (oder zur Re-Attestierung) durchgeführt, um sicherzustellen, dass der ZETA Client und das Primärsystem vertrauenswürdig sind.</li>
<li><strong>Token-Erneuerung (Refresh Token):</strong> Hier wird ein vorhandenes Refresh Token genutzt, um ein neues Access Token zu erhalten. Dieser Prozess ist performanter und verzichtet auf eine erneute Attestierung.</li>
</ol>
<p>Diese Trennung schafft eine Balance zwischen höchster Sicherheit beim initialen Zugriff und Effizienz bei der Erneuerung bestehender Sitzungen.</p>
<p>Die folgende Abbildung zeigt den Ablauf des Token-Austauschs mit Client Assertion JWT Authentifizierung und DPoP.</p>
<p>![tpm-attestation-and-token-exchange-overview]({{ site.baseurl }}/images/tpm-attestation-and-token-exchange/token-exchange-with-client-assertion-jwt-auth.svg)</p>
<p style="font-size:0.9em; text-align:center;"><em>Abbildung 4: Ablauf Authentifizierung und TPM-Attestation</em></p>
<h5 id="pfad-a-token-austausch-mit-attestierung">Pfad A: Token-Austausch mit Attestierung</h5>
<p>Dieser Pfad wird beschritten, wenn der Client keine bestehende Session (d.h. kein gültiges Refresh Token) hat.</p>
<ol>
<li>
<p><strong>Vorbereitung:</strong></p>
<ul>
<li>Der Client fordert eine frische, einmalig gültige <code>nonce</code> vom Authorization Server an (<code>GET /nonce</code>).</li>
<li>Der Client erzeugt ein temporäres, nur für diese Session gültiges DPoP-Schlüsselpaar.</li>
</ul>
</li>
<li>
<p><strong>Integritätsprüfung und kryptografische Bindung:</strong></p>
<ul>
<li>Um zu beweisen, dass die Attestierung für genau diesen Client und diese Transaktion erstellt wurde, erzeugt der Client eine <code>attestation_challenge</code>. Diese bindet den Zustand des TPMs an den <strong>öffentlichen Client Instance Key</strong> und die <code>nonce</code> des AS: <code>attestation_challenge = HASH( HASH(Client_Instance_Public_Key_JWK) + nonce )</code>.</li>
<li>Der Client fordert beim ZETA Attestation Service eine TPM Quote an, die diese <code>attestation_challenge</code> als <code>qualifyingData</code> enthält. Das TPM signiert somit eine Aussage, die mit der Identität des Clients verbunden ist.</li>
</ul>
</li>
<li>
<p><strong>Erstellen des Client Statement:</strong> Die Attestierungsartefakte (TPM Quote, Event Log, Zertifikatskette) werden in eine <code>client_statement</code>-Struktur gepackt. Im Falle des Fallbacks (Software-Attestierung) enthält diese Struktur andere, softwarebasierte Evidenz.</p>
</li>
<li>
<p><strong>Erstellen der Client Assertion (mit Attestierung):</strong> Für die Authentifizierung am Token-Endpoint erstellt der Client eine <strong>Client Assertion</strong>. Dieses JWT, mit dem <strong>privaten Client Instance Key</strong> signiert, dient als &ldquo;Umschlag&rdquo;:</p>
<ul>
<li>Es authentifiziert den Client gegenüber dem AS (<code>iss</code> und <code>sub</code> sind die <code>client_id</code>).</li>
<li>Es enthält die <code>client_statement</code>-Struktur als Beweis für die Geräteintegrität, verpackt in einem spezifischen Claim (<code>urn:gematik:params:oauth:client-attestation:tpm2</code> oder <code>...:software</code>).</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#75715e">// Client Assertion für initialen Token-Austausch (Beispiel TPM)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;iss&#34;</span>: <span style="color:#e6db74">&#34;&lt;client_id&gt;&#34;</span>, <span style="color:#f92672">&#34;sub&#34;</span>: <span style="color:#e6db74">&#34;&lt;client_id&gt;&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;aud&#34;</span>: <span style="color:#e6db74">&#34;&lt;AS_Token_Endpoint_URL&gt;&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;exp&#34;</span>: <span style="color:#960050;background-color:#1e0010">...</span>, <span style="color:#f92672">&#34;jti&#34;</span>: <span style="color:#e6db74">&#34;...&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// Kapselung des Attestierungsnachweises
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#f92672">&#34;urn:gematik:params:oauth:client-attestation:tpm2&#34;</span>: {
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">&#34;attestation_data&#34;</span>: <span style="color:#e6db74">&#34;&lt;Base64(client_statement)&gt;&#34;</span>,
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">&#34;client_statement_format&#34;</span>: <span style="color:#e6db74">&#34;client-statement&#34;</span>
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
<li>
<p><strong>Authentisierung der Institution (SM(C)-B Token):</strong> Parallel dazu erstellt der Client das <code>subject_token</code>. Dies ist ein vom ZETA Client erzeugtes JWT, dessen Hash vom Konnektor mittels der SM(C)-B signiert wird und die Identität der Institution (z.B. Praxis) belegt. Die Audience (<code>aud</code>) dieses Tokens ist der Ziel-Fachdienst (Resource Server).</p>
</li>
<li>
<p><strong>Token Request:</strong> Der Client sendet eine <code>POST</code>-Anfrage an den <code>/token</code>-Endpoint, die alle Teile kombiniert: <code>grant_type=token-exchange</code>, das <code>subject_token</code>, die <code>client_assertion</code> (mit der eingebetteten Attestierung) und den DPoP-Proof.</p>
</li>
<li>
<p><strong>Validierung durch den AS:</strong> Der AS führt eine umfassende Prüfung durch: Validierung der Client Assertion (Signatur gegen den bei der DCR hinterlegten Public Key), des DPoP-Proofs, des Subject Tokens und insbesondere der <strong>eingebetteten Attestierung</strong> (Prüfung der Quote, der <code>attestation_challenge</code> und der PCR-Werte gegen die Sicherheits-Policy).</p>
</li>
</ol>
<h5 id="pfad-b-token-erneuerung-via-refresh-token">Pfad B: Token-Erneuerung via Refresh Token</h5>
<p>Dieser effiziente Pfad wird genutzt, wenn ein gültiges Refresh Token vorhanden ist.</p>
<ol>
<li>
<p><strong>Erstellen der Client Assertion (ohne Attestierung):</strong> Der Client erstellt eine einfache <code>client_assertion</code>. Sie beweist durch ihre Signatur mit dem Client Instance Key die Identität des Clients. Diese Assertion enthält keine Attestierungsdaten.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#75715e">// Client Assertion für Refresh-Token-Nutzung
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;iss&#34;</span>: <span style="color:#e6db74">&#34;&lt;client_id&gt;&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;sub&#34;</span>: <span style="color:#e6db74">&#34;&lt;client_id&gt;&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;aud&#34;</span>: <span style="color:#e6db74">&#34;&lt;AS_Token_Endpoint_URL&gt;&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;exp&#34;</span>: <span style="color:#960050;background-color:#1e0010">...</span>, <span style="color:#f92672">&#34;jti&#34;</span>: <span style="color:#e6db74">&#34;...&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
<li>
<p><strong>Token Request:</strong> Der Client sendet eine <code>POST</code>-Anfrage an den <code>/token</code>-Endpoint mit <code>grant_type=refresh_token</code>, dem Refresh Token und der einfachen <code>client_assertion</code>.</p>
</li>
<li>
<p><strong>Validierung durch den AS:</strong> Der AS validiert das Refresh Token, die Signatur der Client Assertion und den DPoP-Proof. Die Prüfung einer TPM-Attestierung entfällt. Bei Erfolg wird das alte Refresh Token invalidiert (Rotation).</p>
</li>
</ol>
<hr>
<h5 id="gemeinsame-nachfolgende-schritte">Gemeinsame nachfolgende Schritte</h5>
<p>Nach erfolgreicher Validierung in einem der beiden Pfade fragt der AS bei der Policy Engine (PE) an, ob der Zugriff gewährt werden soll. Ist die Entscheidung positiv, stellt der AS ein neues Access Token (gebunden an den DPoP-Schlüssel) und ein neues Refresh Token aus.</p>
<hr>
<h4 id="mobile-clients-1">Mobile Clients</h4>
<p>Die Authentifizierung für mobile Clients erfolgt mit OpenID Connect und OAuth2 Authorization Code Flow.
Die Beschreibung wird ergänzt, wenn die Entwicklung von ZETA Stufe 2 abgeschlossen ist.</p>
<h2 id="endpunkte">Endpunkte</h2>
<p>Die ZETA API besteht aus mehreren Endpunkten, die verschiedene Funktionen bereitstellen. Diese Endpunkte sind in verschiedene Kategorien unterteilt:</p>
<ul>
<li><strong>ZETA Guard API Endpunkte:</strong> Diese Endpunkte ermöglichen die Interaktion mit dem ZETA Guard, einschließlich der Registrierung von Clients, der Authentifizierung und der Autorisierung.</li>
<li><strong>Konnektor/TI-Gateway Endpunkte:</strong> Diese Endpunkte ermöglichen die Interaktion mit dem Konnektor/TI-Gateway, um Karteninformationen zu lesen und Authentifizierungsanfragen zu stellen.</li>
<li><strong>ZETA Attestation Service Endpunkte:</strong> Diese Endpunkte ermöglichen die Interaktion mit dem ZETA Attestation Service, um TPM-Attestierungen durchzuführen.</li>
</ul>
<h3 id="zeta-guard-api-endpunkte">ZETA Guard API Endpunkte</h3>
<p>Die ZETA Guard API Endpunkte sind für die Interaktion mit dem ZETA Guard zuständig. Sie ermöglichen die Registrierung von Clients, die Authentifizierung und Autorisierung sowie den Zugriff auf geschützte Ressourcen.
Die ZETA Guard API Endpunkte sind über HTTPS erreichbar und erfordern eine gültige TLS-Verbindung. Der ZETA Client muss die folgenden Sicherheitsanforderungen erfüllen:</p>
<ul>
<li>ZETA Clients müssen TLS 1.3 oder höher unterstützen.</li>
<li>Es müssen die TLS Anforderungen aus <a href="https://gemspec.gematik.de/docs/gemSpec/gemSpec_Krypt/latest/#3.3.2">gemSpec_Krypt Kapitel 3.3.2</a> erfüllt werden.</li>
</ul>
<h4 id="oauth-protected-resource-well-known-endpoint">OAuth Protected Resource Well-Known Endpoint</h4>
<p>Dieser Endpunkt bietet eine standardisierte Methode für OAuth Protected Resources (OPR), um ihre Fähigkeiten und Konfigurationsdetails zu veröffentlichen (RFC 9728). Er ermöglicht es Clients, die notwendigen Informationen über die OPR abzurufen, wie z.B. unterstützte Schemata, Verifizierungsmethoden, Token-Introspektion-Endpunkte und unterstützte Scopes. Der Endpunkt ist unter dem Pfad <code>/.well-known/oauth-protected-resource</code> relativ zur Basis-URL der Protected Resource erreichbar.</p>
<hr>
<h5 id="anfragen">Anfragen</h5>
<p>Der Endpunkt wird über eine einfache HTTP GET-Anfrage ohne Body aufgerufen.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-http" data-lang="http"><span style="display:flex;"><span><span style="color:#a6e22e">GET</span> /.well-known/oauth-protected-resource <span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span>
</span></span><span style="display:flex;"><span>Host<span style="color:#f92672">:</span> <span style="color:#ae81ff">api.example.com</span>
</span></span><span style="display:flex;"><span>Accept<span style="color:#f92672">:</span> <span style="color:#ae81ff">application/json</span>
</span></span></code></pre></div><hr>
<h5 id="antworten">Antworten</h5>
<p>Wie im obigen Abschnitt dargestellt, ist die typische erfolgreiche API-Antwort ein JSON-Objekt, das der im <code>opr-well-known.yaml</code>-Schema definierten Struktur entspricht. Der <code>Content-Type</code>-Header der Antwort ist <code>application/json</code>.</p>
<p><strong>Statuscodes:</strong></p>
<ul>
<li><strong>200 OK:</strong>
<ul>
<li><strong>Bedeutung:</strong> Die Anfrage war erfolgreich, und die Konfigurationsdaten der Protected Resource wurden als JSON-Objekt im Antwort-Body zurückgegeben.
Eine erfolgreiche Anfrage liefert ein JSON-Objekt, das die Konfiguration der Protected Resource beschreibt. Die genauen Felder hängen von der Implementierung und den unterstützten Fähigkeiten der geschützten Resource ab.</li>
<li><strong>Beispielantwort:</strong></li>
</ul>
</li>
</ul>
<p>Content-Type: application/json</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;resource&#34;</span>: <span style="color:#e6db74">&#34;https://api.example.com&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;authorization_servers&#34;</span>: [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;https://auth1.example.com&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;https://auth2.example.com&#34;</span>
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;jwks_uri&#34;</span>: <span style="color:#e6db74">&#34;https://api.example.com/.well-known/jwks.json&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;scopes_supported&#34;</span>: [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;read&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;write&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;delete&#34;</span>
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;bearer_methods_supported&#34;</span>: [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;header&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;body&#34;</span>
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;resource_signing_alg_values_supported&#34;</span>: [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;RS256&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;ES256&#34;</span>
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;resource_name&#34;</span>: <span style="color:#e6db74">&#34;Example Protected API&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;resource_documentation&#34;</span>: <span style="color:#e6db74">&#34;https://docs.example.com/api&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;resource_policy_uri&#34;</span>: <span style="color:#e6db74">&#34;https://www.example.com/privacy&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;resource_tos_uri&#34;</span>: <span style="color:#e6db74">&#34;https://www.example.com/terms&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;tls_client_certificate_bound_access_tokens&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;authorization_details_types_supported&#34;</span>: [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;payment_initiation&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;account_access&#34;</span>
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;dpop_signing_alg_values_supported&#34;</span>: [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;ES256&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;RS512&#34;</span>
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;dpop_bound_access_tokens_required&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;signed_metadata&#34;</span>: <span style="color:#e6db74">&#34;eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJyZXNvdXJjZSI6Imh0dHBzOi8vYXBpLmV4YW1wbGUuY29tIn0.XYZ123abc456def789&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;zeta_asl_use&#34;</span>: <span style="color:#e6db74">&#34;required&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;api_versions_supported&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;major_version&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;1.4.2&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;stable&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;documentation_uri&#34;</span>: <span style="color:#e6db74">&#34;https://github.com/gematik/zeta/api/v1&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;major_version&#34;</span>: <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;2.0.0-beta.3&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;beta&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;documentation_uri&#34;</span>: <span style="color:#e6db74">&#34;https://github.com/gematik/zeta/api/v2&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;major_version&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;1.3.0&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;deprecated&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;documentation_uri&#34;</span>: <span style="color:#e6db74">&#34;https://github.com/gematik/zeta/api/v1&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li><strong>404 Not Found:</strong>
<ul>
<li><strong>Bedeutung:</strong> Der angeforderte Well-Known Endpoint konnte auf dem Server nicht gefunden werden. Dies kann daran liegen, dass die Protected Resource diesen Endpunkt nicht hostet oder falsch konfiguriert ist.</li>
<li><strong>Beispielantwort:</strong></li>
</ul>
</li>
</ul>
<p>Content-Type: application/problem+json</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;https://httpstatuses.com/404&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;OAuth Protected Resource Configuration Not Found&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#ae81ff">404</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;detail&#34;</span>: <span style="color:#e6db74">&#34;The requested OAuth Protected Resource Well-Known configuration could not be found at this path.&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;instance&#34;</span>: <span style="color:#e6db74">&#34;/.well-known/oauth-protected-resource&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li><strong>500 Internal Server Error:</strong>
<ul>
<li><strong>Bedeutung:</strong> Ein unerwarteter Fehler ist auf dem Server der Protected Resource aufgetreten, der die Verarbeitung der Anfrage verhindert hat.</li>
<li><strong>Beispielantwort:</strong> Ein leerer Body, ein generischer
Content-Type: application/problem+json</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;https://httpstatuses.com/500&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Internal Server Error&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#ae81ff">500</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;detail&#34;</span>: <span style="color:#e6db74">&#34;An unexpected error occurred while processing your request.&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;instance&#34;</span>: <span style="color:#e6db74">&#34;/.well-known/oauth-protected-resource&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<h4 id="authorization-server-well-known-endpoint">Authorization Server Well-Known Endpoint</h4>
<p>Dieser Endpunkt ermöglicht Clients und anderen Parteien die einfache Entdeckung der Konfigurationsmetadaten eines ZETA Guard OAuth 2.0 Autorisierungsservers (AS) und seiner Fähigkeiten. Er ist gemäß RFC 8414 definiert und bietet eine standardisierte Methode, um Informationen wie Endpunkt-URIs, unterstützte Grant Types und Scopes abzurufen.</p>
<hr>
<h5 id="anfragen-1">Anfragen</h5>
<p>Dieser Endpunkt wird über eine HTTP GET-Anfrage ohne Parameter aufgerufen.</p>
<p><strong>Methode:</strong>
<code>GET</code></p>
<p><strong>Header:</strong>
Ein <code>Accept</code>-Header mit <code>application/json</code> wird empfohlen, um die bevorzugte Antwortformat anzugeben.</p>
<p><strong>Beispiel Anfrage:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-http" data-lang="http"><span style="display:flex;"><span><span style="color:#a6e22e">GET</span> /.well-known/oauth-authorization-server <span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span>
</span></span><span style="display:flex;"><span>Host<span style="color:#f92672">:</span> <span style="color:#ae81ff">api.example.com</span>
</span></span><span style="display:flex;"><span>Accept<span style="color:#f92672">:</span> <span style="color:#ae81ff">application/json</span>
</span></span></code></pre></div><hr>
<h5 id="antworten-1">Antworten</h5>
<p><strong>Statuscodes:</strong></p>
<ul>
<li><strong>200 OK:</strong>
<ul>
<li><strong>Bedeutung:</strong> Die Anfrage war erfolgreich, und der Server gibt die Konfigurationsmetadaten des Autorisierungsservers als JSON-Objekt zurück.</li>
<li><strong>Content-Type:</strong> <code>application/json</code></li>
<li><strong>Beispiel Antwort:</strong></li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;issuer&#34;</span>: <span style="color:#e6db74">&#34;https://api.example.com&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;authorization_endpoint&#34;</span>: <span style="color:#e6db74">&#34;https://api.example.com/auth&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;token_endpoint&#34;</span>: <span style="color:#e6db74">&#34;https://api.example.com/token&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;jwks_uri&#34;</span>: <span style="color:#e6db74">&#34;https://api.example.com/certs&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;response_types_supported&#34;</span>: [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;code&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;token&#34;</span>
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;response_modes_supported&#34;</span>: [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;query&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;fragment&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;form_post&#34;</span>
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;grant_types_supported&#34;</span>: [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;authorization_code&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;token-exchange&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;refresh_token&#34;</span>
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;token_endpoint_auth_methods_supported&#34;</span>: [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;private_key_jwt&#34;</span>
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;token_endpoint_auth_signing_alg_values_supported&#34;</span>: [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;ES256&#34;</span>
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;service_documentation&#34;</span>: <span style="color:#e6db74">&#34;https://api.example.com/docs&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;code_challenge_methods_supported&#34;</span>: [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;S256&#34;</span>
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;api_versions_supported&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;major_version&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;1.4.2&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;stable&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;documentation_uri&#34;</span>: <span style="color:#e6db74">&#34;https://github.com/gematik/zeta/api/v1&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;major_version&#34;</span>: <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;2.0.0-beta.3&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;beta&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;documentation_uri&#34;</span>: <span style="color:#e6db74">&#34;https://github.com/gematik/zeta/api/v2&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;major_version&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;1.3.0&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;deprecated&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;documentation_uri&#34;</span>: <span style="color:#e6db74">&#34;https://github.com/gematik/zeta/api/v1&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;api_versions_supported&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;major_version&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;1.4.2&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;stable&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;documentation_uri&#34;</span>: <span style="color:#e6db74">&#34;https://github.com/gematik/zeta/api/v1&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;major_version&#34;</span>: <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;2.0.0-beta.3&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;beta&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;documentation_uri&#34;</span>: <span style="color:#e6db74">&#34;https://github.com/gematik/zeta/api/v2&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;major_version&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;1.3.0&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;deprecated&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;documentation_uri&#34;</span>: <span style="color:#e6db74">&#34;https://github.com/gematik/zeta/api/v1&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>404 Not Found:</strong></p>
<p><strong>Content-Type:</strong>
<code>application/problem+json</code></p>
<p>Dies tritt auf, wenn der Endpunkt unter der angefragten URL nicht gefunden werden kann.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;https://httpstatuses.com/404&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Not Found&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#ae81ff">404</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;detail&#34;</span>: <span style="color:#e6db74">&#34;The requested resource was not found on this server.&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;instance&#34;</span>: <span style="color:#e6db74">&#34;/.well-known/oauth-authorization-server&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>500 Internal Server Error:</strong></p>
<p><strong>Content-Type:</strong>
<code>application/problem+json</code></p>
<p>Dies tritt auf, wenn ein unerwarteter Fehler auf dem Server auftritt, der die Anfrage nicht verarbeiten konnte.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;https://httpstatuses.com/500&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Internal Server Error&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#ae81ff">500</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;detail&#34;</span>: <span style="color:#e6db74">&#34;An unexpected error occurred while processing your request.&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;instance&#34;</span>: <span style="color:#e6db74">&#34;/.well-known/oauth-authorization-server&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<h4 id="nonce-endpoint">Nonce Endpoint</h4>
<p>Dieser Endpunkt ermöglicht Clients das Abrufen eines einmaligen kryptographischen Werts, einer &ldquo;Nonce&rdquo;. Im Kontext der ZETA-Architektur dient diese Nonce primär dazu, eine spezifische <strong>TPM-Attestierung an eine aktuelle Transaktion zu binden</strong>, um Replay-Angriffe zu verhindern. Sie wird Teil der <code>attestation_challenge</code>, die vom TPM signiert wird.</p>
<p>Beim Token Endpunkt wird ebenfalls eine Nonce benötigt, um die Integrität der Transaktion zu gewährleisten. Diese Nonce wird in der Client Assertion verwendet, um Replay-Angriffe zu verhindern und die Bindung zwischen der Client Authentifizierung und der Transaktion sicherzustellen.</p>
<hr>
<h5 id="anfragen-2">Anfragen</h5>
<p><strong>Beispiel Anfrage:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-http" data-lang="http"><span style="display:flex;"><span><span style="color:#a6e22e">GET</span> /nonce <span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span>
</span></span><span style="display:flex;"><span>Host<span style="color:#f92672">:</span> <span style="color:#ae81ff">api.example.com</span>
</span></span><span style="display:flex;"><span>Accept<span style="color:#f92672">:</span> <span style="color:#ae81ff">application/json</span>
</span></span></code></pre></div><hr>
<h5 id="antworten-2">Antworten</h5>
<p><strong>Statuscodes:</strong></p>
<ul>
<li><strong>200 OK:</strong>
<ul>
<li><strong>Bedeutung:</strong> Die Anfrage war erfolgreich, und der Server gibt die Nonce als JSON-Objekt zurück.</li>
<li><strong>Content-Type:</strong> <code>application/json</code></li>
<li><strong>Beispiel Antwort:</strong></li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;nonce&#34;</span>: <span style="color:#e6db74">&#34;s.fRzE3M0J_QxL-x.6gA~x&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;expires_in&#34;</span>: <span style="color:#ae81ff">30</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>Felder der erfolgreichen Antwort:</strong></p>
<ul>
<li><code>nonce</code> (String): Der generierte, einmalige kryptographische Wert.</li>
<li><code>expires_in</code> (Integer): Die Gültigkeitsdauer der Nonce in Sekunden, ab dem Zeitpunkt der Ausstellung. Nach Ablauf dieser Zeit sollte die Nonce vom Server nicht mehr akzeptiert werden.</li>
</ul>
<p><strong>404 Not Found:</strong></p>
<p><strong>Content-Type:</strong>
<code>application/problem+json</code></p>
<p>Dies tritt auf, wenn der Endpunkt unter der angefragten URL nicht gefunden werden kann.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;https://httpstatuses.com/404&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Not Found&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#ae81ff">404</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;detail&#34;</span>: <span style="color:#e6db74">&#34;The requested resource was not found on this server.&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;instance&#34;</span>: <span style="color:#e6db74">&#34;/nonce&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>429 Too Many Requests:</strong></p>
<p>Dieser Fehler tritt auf, wenn der Client die vom Server festgelegten Ratenbegrenzungen überschreitet.</p>
<p><strong>Content-Type:</strong>
<code>application/problem+json</code></p>
<p><strong>Retry-After:</strong> 60</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;tag:authorization.example.com,2023:oauth:nonce:rate_limit_exceeded&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Rate Limit Exceeded&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#ae81ff">429</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;detail&#34;</span>: <span style="color:#e6db74">&#34;You have exceeded the allowed number of nonce requests. Please try again after 60 seconds.&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;instance&#34;</span>: <span style="color:#e6db74">&#34;/nonce&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li><code>Retry-After</code> Header (optional): Gibt an, wie viele Sekunden der Client warten sollte, bevor er eine weitere Anfrage stellt.</li>
</ul>
<p><strong>500 Internal Server Error:</strong></p>
<p><strong>Content-Type:</strong>
<code>application/problem+json</code></p>
<p>Dies tritt auf, wenn ein unerwarteter Fehler auf dem Server auftritt, der die Anfrage nicht verarbeiten konnte.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;https://httpstatuses.com/500&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Internal Server Error&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#ae81ff">500</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;detail&#34;</span>: <span style="color:#e6db74">&#34;An unexpected error occurred while processing your request.&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;instance&#34;</span>: <span style="color:#e6db74">&#34;/nonce&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<h4 id="dynamic-client-registration-endpoint">Dynamic Client Registration Endpoint</h4>
<p>Dieser Endpunkt ermöglicht die dynamische Registrierung neuer OAuth 2.0 Clients beim Authorization Server gemäß RFC 7591. Der Prozess dient dazu, eine <code>client_id</code> zu erhalten und den öffentlichen <strong>Client Instance Key</strong> zu registrieren, der für die <code>private_key_jwt</code> Client-Authentifizierung verwendet wird.</p>
<p>Die Registrierung selbst erfordert <strong>keine</strong> Attestierung. Der Client erhält den Status <code>pending_attestation</code> und muss seine Integrität beim ersten Token Exchange beweisen, um aktiviert zu werden. Die Registrierung muss über eine TLS-geschützte Verbindung erfolgen.</p>
<p><em>Hinweis:</em> Es fehlen noch die Operationen zur Verwaltung von bestehenden Client Registrierungen (z.B. Aktualisierung, Löschung). Diese werden in zukünftigen Versionen der API ergänzt.</p>
<hr>
<h5 id="anfragen-für-stationäre-clients">Anfragen für stationäre Clients</h5>
<p>Der Client sendet eine <code>POST</code>-Anfrage an den <code>/register</code>-Endpunkt. Der Anfrage-Body ist ein JSON-Objekt, das die Metadaten des zu registrierenden Clients enthält.</p>
<p><strong>Beispiel Anfrage:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-http" data-lang="http"><span style="display:flex;"><span><span style="color:#a6e22e">POST</span> /register <span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span>
</span></span><span style="display:flex;"><span>Host<span style="color:#f92672">:</span> <span style="color:#ae81ff">api.example.com</span>
</span></span><span style="display:flex;"><span>Accept<span style="color:#f92672">:</span> <span style="color:#ae81ff">application/json</span>
</span></span><span style="display:flex;"><span>Content-type<span style="color:#f92672">:</span> <span style="color:#ae81ff">application/json</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;client_name&#34;</span>: <span style="color:#e6db74">&#34;Praxis-PC-123&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;token_endpoint_auth_method&#34;</span>: <span style="color:#e6db74">&#34;private_key_jwt&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;grant_types&#34;</span>: [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;urn:ietf:params:oauth:grant-type:token-exchange&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;refresh_token&#34;</span>
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;jwks&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;keys&#34;</span>: [
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;kty&#34;</span>: <span style="color:#e6db74">&#34;EC&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;crv&#34;</span>: <span style="color:#e6db74">&#34;P-256&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;x&#34;</span>: <span style="color:#e6db74">&#34;...&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;y&#34;</span>: <span style="color:#e6db74">&#34;...&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;use&#34;</span>: <span style="color:#e6db74">&#34;sig&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;kid&#34;</span>: <span style="color:#e6db74">&#34;...&#34;</span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    ]
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;redirect_uris&#34;</span>: [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;https://client.example.org/cb&#34;</span>
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>Erforderliche Parameter im Anfrage-Body:</strong></p>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Parameter</th>
          <th style="text-align: left">Typ</th>
          <th style="text-align: left">Beschreibung</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>grant_types</code></td>
          <td style="text-align: left"><code>array</code></td>
          <td style="text-align: left">Eine Liste der Grant Types, die der Client verwenden darf.</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>jwks</code></td>
          <td style="text-align: left"><code>object</code></td>
          <td style="text-align: left">Das JSON Web Key Set [RFC7517] des Clients, das den öffentlichen <strong>Client Instance Key</strong> enthält.</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>token_endpoint_auth_method</code></td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">Muss <code>private_key_jwt</code> sein, um die Client-Authentifizierung mittels signierter JWTs zu erzwingen.</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>redirect_uris</code></td>
          <td style="text-align: left"><code>array</code></td>
          <td style="text-align: left">Optional für reine Backend-Clients, aber empfohlen. Mindestens eine URI, die für interaktive Flows (z.B. zukünftige mobile Clients) verwendet wird.</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>client_name</code></td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">Optional. Ein für Menschen lesbarer Name für den Client.</td>
      </tr>
  </tbody>
</table>
<hr>
<h5 id="antworten-3">Antworten</h5>
<p>Der Authorization Server antwortet mit verschiedenen HTTP-Statuscodes und entsprechenden JSON-Objekten, die entweder die erfolgreiche Registrierung oder Fehlermeldungen gemäß RFC 9457 (&ldquo;Problem Details for HTTP APIs&rdquo;) beschreiben.</p>
<p><strong>Statuscodes:</strong></p>
<ul>
<li>
<p><strong>201 Created:</strong></p>
<ul>
<li>
<p><strong>Bedeutung:</strong> Die Registrierung war erfolgreich. Der Server gibt die <code>client_id</code> und die registrierten Metadaten zurück.</p>
</li>
<li>
<p><strong>Content-Type:</strong> <code>application/json</code></p>
</li>
<li>
<p><strong>Beispiel Antwort:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;client_id&#34;</span>: <span style="color:#e6db74">&#34;1234567890abcdef&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;client_id_issued_at&#34;</span>: <span style="color:#ae81ff">1678886400</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;grant_types&#34;</span>: [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;urn:ietf:params:oauth:grant-type:token-exchange&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;refresh_token&#34;</span>
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;token_endpoint_auth_method&#34;</span>: <span style="color:#e6db74">&#34;private_key_jwt&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;client_name&#34;</span>: <span style="color:#e6db74">&#34;Praxis-PC-123&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;jwks&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;keys&#34;</span>: [
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;kty&#34;</span>: <span style="color:#e6db74">&#34;EC&#34;</span>, <span style="color:#f92672">&#34;crv&#34;</span>: <span style="color:#e6db74">&#34;P-256&#34;</span>, <span style="color:#f92672">&#34;x&#34;</span>: <span style="color:#e6db74">&#34;...&#34;</span>, <span style="color:#f92672">&#34;y&#34;</span>: <span style="color:#e6db74">&#34;...&#34;</span>, <span style="color:#f92672">&#34;use&#34;</span>: <span style="color:#e6db74">&#34;sig&#34;</span>, <span style="color:#f92672">&#34;kid&#34;</span>: <span style="color:#e6db74">&#34;...&#34;</span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    ]
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">&#34;redirect_uris&#34;</span>: [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;https://client.example.org/cb&#34;</span>
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
</ul>
</li>
<li>
<p><strong>400 Bad Request:</strong></p>
<ul>
<li><strong>Bedeutung:</strong> Die Anfrage war fehlerhaft, z.B. fehlende oder ungültige Parameter.</li>
<li><strong>Content-Type:</strong> <code>application/problem+json</code></li>
<li><strong>Beispiel Antwort:</strong></li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;https://httpstatuses.com/400&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Bad Request&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#ae81ff">400</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;detail&#34;</span>: <span style="color:#e6db74">&#34;Invalid request parameters.&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;instance&#34;</span>: <span style="color:#e6db74">&#34;/register&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li><strong>409 Conflict  :</strong>
<ul>
<li><strong>Bedeutung:</strong> Ein Client mit dem angegebenen <code>Client_Instance_Public_Key</code> existiert bereits.</li>
<li><strong>Content-Type:</strong> <code>application/problem+json</code></li>
<li><strong>Beispiel Antwort:</strong></li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;https://httpstatuses.com/409&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Conflict&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#ae81ff">409</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;detail&#34;</span>: <span style="color:#e6db74">&#34;A client with the provided Client_Instance_Public_Key already exists.&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;instance&#34;</span>: <span style="color:#e6db74">&#34;/register&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li><strong>500 Internal Server Error:</strong>
<ul>
<li><strong>Bedeutung:</strong> Ein unerwarteter Fehler ist auf dem Server aufgetreten, der die Anfrage nicht verarbeiten konnte.</li>
<li><strong>Content-Type:</strong> <code>application/problem+json</code></li>
<li><strong>Beispiel Antwort:</strong></li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;https://httpstatuses.com/500&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Internal Server Error&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#ae81ff">500</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;detail&#34;</span>: <span style="color:#e6db74">&#34;An unexpected error occurred while processing your request.&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;instance&#34;</span>: <span style="color:#e6db74">&#34;/register&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<h5 id="anfragen-für-mobile-clients">Anfragen für mobile Clients</h5>
<p>Die Registrierung für mobile Clients erfolgt ähnlich wie bei stationären Clients, jedoch mit anderen Anforderungen an die Client-Attestation, die auf den jeweiligen Plattformen basieren. Mobile Clients verwenden eine spezifische Attestierungsmethode, die auf den Betriebssystemen basiert (z.B. Android SafetyNet, iOS DeviceCheck).</p>
<p>Die Beschreibung wird in Stufe 2 der ZETA API ergänzt.</p>
<h4 id="token-endpoint">Token Endpoint</h4>
<p>Der Token Endpoint des Autorisierungsservers (AS) ermöglicht den Austausch eines Tokens gegen ein vom Authorizationserver ausgestelltes Access Token, gemäß dem OAuth 2.0 Token Exchange (RFC 8693) oder die Erneuerung von Token (<code>refresh_token</code>). Der Client muss sich mit einer JWT Client Assertion gegenüber den Authorization Server authentifizieren.</p>
<p>Der Endpunkt ist ein POST-Endpunkt, der Formular-kodierte Daten (<code>application/x-www-form-urlencoded</code>) im Body erwartet und JSON-Objekte im Erfolgsfall oder &ldquo;Problem Details&rdquo; im Fehlerfall zurückgibt.</p>
<p>Der Endpunkt unterstützt verschiedene Grant Types, einschließlich <code>authorization_code</code> (ab ZETA Stufe 2), <code>urn:ietf:params:oauth:grant-type:token-exchange</code>, <code>refresh_token</code> und <code>urn:ietf:params:oauth:grant-type:token-exchange</code>.</p>
<h5 id="anfragen-3">Anfragen</h5>
<p>Der Token Endpoint empfängt POST-Anfragen mit dem Content-Type <code>application/x-www-form-urlencoded</code>. Die Anfrage muss die notwendigen Parameter für den Token Exchange Grant Type enthalten, sowie die Client-Authentifizierung mittels JWT Bearer Client Assertion.</p>
<p><strong>HTTP Methode:</strong> <code>POST</code></p>
<p><strong>Pfad:</strong> <code>/token</code></p>
<p><strong>Content-Type:</strong> <code>application/x-www-form-urlencoded</code></p>
<p><strong>Anfrageparameter:</strong></p>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Parameter</th>
          <th style="text-align: left">Typ</th>
          <th style="text-align: left">Erforderlich</th>
          <th style="text-align: left">Beschreibung</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>grant_type</code></td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">Ja</td>
          <td style="text-align: left">Der Grant Type. Für Token Exchange ist dies immer <code>urn:ietf:params:oauth:grant-type:token-exchange</code>.</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>client_assertion_type</code></td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">Ja</td>
          <td style="text-align: left">Gibt den Typ der Client Assertion an. Für JWT Bearer Client Assertion ist dies immer <code>urn:ietf:params:oauth:client-assertion-type:jwt-bearer</code>.</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>client_assertion</code></td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">Ja</td>
          <td style="text-align: left">Die JWT, die zur Authentifizierung des Clients dient. Diese JWT muss vom Client signiert sein und folgende Claims enthalten: <br/>- <code>iss</code> (Issuer): Die Client ID.<br/>- <code>sub</code> (Subject): Die Client ID.<br/>- <code>aud</code> (Audience): Die URL des Token Endpoints.<br/>- <code>exp</code> (Expiration Time): Die Zeit, nach der die JWT ungültig wird.<br/>- <code>jti</code> (JWT ID): Ein eindeutiger Bezeichner für diese JWT, um Replay-Angriffe zu verhindern.<br/>- <code>iat</code> (Issued At): Zeitpunkt der Ausstellung der JWT.</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>resource</code></td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">Ja</td>
          <td style="text-align: left">Eine URI, die den Zieldienst oder die Zielressource angibt, für die der Client das angeforderte Sicherheitstoken verwenden möchte. Dadurch kann der Autorisierungsserver die für das Ziel geeigneten Richtlinien anwenden, z. B. den Typ und Inhalt des auszugebenden Tokens bestimmen oder festlegen, ob und wie das Token verschlüsselt werden soll.</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>subject_token_type</code></td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">Ja</td>
          <td style="text-align: left">Der Typ des Tokens, das ausgetauscht werden soll. Beispiele könnten sein: <code>urn:ietf:params:oauth:token-type:access_token</code>, <code>urn:ietf:params:oauth:token-type:jwt</code> oder andere spezifische URIs.</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>subject_token</code></td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">Ja</td>
          <td style="text-align: left">Das eigentliche Token, das ausgetauscht werden soll. Dies kann ein JWT, ein Referenz-Token oder ein anderes Format sein, abhängig vom <code>subject_token_type</code>.</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>scope</code></td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">Optional</td>
          <td style="text-align: left">Eine durch Leerzeichen getrennte Liste von Scopes, für die der Access Token ausgestellt werden soll. Wenn nicht angegeben, werden die mit dem <code>subject_token</code> und/oder Client verbundenen Standard-Scopes verwendet.</td>
      </tr>
  </tbody>
</table>
<p><strong>Beispiel Anfrage:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -X POST <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  https://as.example.com/token <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#39;Content-Type: application/x-www-form-urlencoded&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#39;DPoP: &lt;signed_dpop_jwt&gt;&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#39;grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Atoken-exchange&amp;&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#39;client_assertion_type=urn%3Aietf%3Aparams%3Aoauth%3Aclient-assertion-type%3Ajwt-bearer&amp;&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#39;client_assertion=eyJhbGciOiJFUzI1NiIsImtpZCI6InNvbWVfa2V5X2lkIn0.eyJpc3MiOiJjbGllbnRfaWQwMDEiLCJzdWIiOiJjbGllbnRfaWQwMDEiLCJhdWQiOiJodHRwczovL2F1dGhvcml6YXRpb24uc2VydmVyLmRlL3Rva2VuIiwiZXhwIjoxNjk1NTA0NjAwLCJpYXQiOjE2OTU1MDI4MDAsImp0aSI6ImFiYzEyMzQ1NiJ9.SOME_SIGNATURE_PART_ONE.SOME_SIGNATURE_PART_TWO&amp;&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#39;resource=https%3A%2F%2Fapi.example.com%2F/resource&amp;&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#39;subject_token_type=urn%3Aietf%3Aparams%3Aoauth%3Atoken-type%3Ajwt&amp;&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#39;subject_token=eyJhbGciOiJFUzI1NiIsImtpZCI6InNvbWVfc3ViamVjdF9rZXlfaWQifQ.eyJpc3MiOiJzb21lX3N1YmplY3RfYXV0aG9yaXR5Iiwic3ViIjoiMTIzNDU2Nzg5MCIsImF1ZCI6Imh0dHBzOi8vYXV0aG9yaXphdGlvbi5zZXJ2ZXIuZGUvdG9rZW4iLCJleHAiOjE2OTU1MDI4NjAsImlhdCI6MTY5NTUwMjgwMH0.SM(C)-B_SIGNATURE&amp;&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#39;scope=resource.read%20resource.write&#39;</span>
</span></span></code></pre></div><h5 id="antworten-4">Antworten</h5>
<p>Antworten werden als JSON-Objekte mit dem <code>Content-Type: application/json</code> im Erfolgsfall und <code>application/problem+json</code> im Fehlerfall zurückgegeben. Fehlerantworten folgen dem &ldquo;Problem Details for HTTP APIs&rdquo;-Standard (RFC 9457).</p>
<p><strong>Statuscodes:</strong></p>
<ul>
<li><strong>200 OK:</strong>
<ul>
<li><strong>Bedeutung:</strong> Die Anfrage war erfolgreich, und der Server gibt das Access Token und andere Metadaten zurück.</li>
<li><strong>Content-Type:</strong> <code>application/json</code></li>
<li><strong>Beispiel Antwort:</strong></li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;access_token&#34;</span>: <span style="color:#e6db74">&#34;eyJhbGciOiJFUzI1NiIsImtpZCI6InRva2VuX2tleV9pZCJ9.eyJpc3MiOiJhdXRoLnNlcnZlci5kZSIsImV4cCI6MTY5NTUwMjgwMCwiYXVkIjpbInJlc291cmNlLnNlcnZlci5kZSJdLCJzdWIiOiIxMjM0NTY3ODkwIiwiY2xpZW50X2lkIjoiZXhhbXBsZV9jbGllbnRfaWQiLCJpYXQiOjE2OTU1MDI4MDAsImp0aSI6ImV4YW1wbGVfamRpX3ZhbHVlIiwic2NvcGUiOiJyZXNvdXJjZS5yZWFkIHJlc291cmNlLndyaXRlIiwiY25mIjp7ImprdCI6ImV4YW1wbGVfamt0X2hhc2gifX0.NEW_SIGNATURE_PLACEHOLDER&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;token_type&#34;</span>: <span style="color:#e6db74">&#34;DPoP&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;expires_in&#34;</span>: <span style="color:#ae81ff">3600</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;scope&#34;</span>: <span style="color:#e6db74">&#34;resource.read resource.write&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;refresh_token&#34;</span>: <span style="color:#e6db74">&#34;some_refresh_token_string&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;issued_token_type&#34;</span>: <span style="color:#e6db74">&#34;urn:ietf:params:oauth:token-type:access_token&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>Inhalt des Access Tokens:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;iss&#34;</span>: <span style="color:#e6db74">&#34;auth.server.de&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;exp&#34;</span>: <span style="color:#ae81ff">1695502800</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;aud&#34;</span>: [<span style="color:#e6db74">&#34;resource.server.de&#34;</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;sub&#34;</span>: <span style="color:#e6db74">&#34;1234567890&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;client_id&#34;</span>: <span style="color:#e6db74">&#34;my_oauth_client_id&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;iat&#34;</span>: <span style="color:#ae81ff">1695502800</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;jti&#34;</span>: <span style="color:#e6db74">&#34;a_unique_jwt_identifier_12345&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;scope&#34;</span>: <span style="color:#e6db74">&#34;resource.read resource.write&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;cnf&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;jkt&#34;</span>: <span style="color:#e6db74">&#34;S7uGv0kQ0g2J_2z8Y_yXm-X_yL0_yXk_Xk_yY1W_Xk&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li><strong>400 Bad Request:</strong>
<ul>
<li><strong>Bedeutung:</strong> Die Anfrage war fehlerhaft, z.B. fehlende oder ungültige Parameter.</li>
<li><strong>Content-Type:</strong> <code>application/problem+json</code></li>
<li><strong>Beispiel Antwort:</strong></li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;https://httpstatuses.com/400&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Bad Request&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#ae81ff">400</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;detail&#34;</span>: <span style="color:#e6db74">&#34;Invalid request parameters.&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;instance&#34;</span>: <span style="color:#e6db74">&#34;/token&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li><strong>401 Unauthorized:</strong>
<ul>
<li><strong>Bedeutung:</strong> Die Client-Authentifizierung ist fehlgeschlagen, z.B. ungültige Client Assertion.</li>
<li><strong>Content-Type:</strong> <code>application/problem+json</code></li>
<li><strong>Beispiel Antwort:</strong></li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;https://httpstatuses.com/401&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Unauthorized&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#ae81ff">401</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;detail&#34;</span>: <span style="color:#e6db74">&#34;Client authentication failed.&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;instance&#34;</span>: <span style="color:#e6db74">&#34;/token&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li><strong>403 Forbidden:</strong>
<ul>
<li><strong>Bedeutung:</strong> Der Client ist nicht berechtigt, den Token Exchange durchzuführen, z.B. wenn der <code>subject_token</code> nicht gültig ist oder der Client nicht die erforderlichen Berechtigungen hat.</li>
<li><strong>Content-Type:</strong> <code>application/problem+json</code></li>
<li><strong>Beispiel Antwort:</strong></li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;https://httpstatuses.com/403&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Forbidden&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#ae81ff">403</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;detail&#34;</span>: <span style="color:#e6db74">&#34;The client is not authorized to perform this token exchange.&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;instance&#34;</span>: <span style="color:#e6db74">&#34;/token&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li><strong>429 Too Many Requests:</strong>
<ul>
<li><strong>Bedeutung:</strong> Der Client hat die Rate-Limits überschritten.</li>
<li><strong>Content-Type:</strong> <code>application/problem+json</code></li>
<li><strong>Beispiel Antwort:</strong></li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;https://httpstatuses.com/429&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Too Many Requests&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#ae81ff">429</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;detail&#34;</span>: <span style="color:#e6db74">&#34;Rate limit exceeded. Please try again later.&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;instance&#34;</span>: <span style="color:#e6db74">&#34;/token&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li><strong>500 Internal Server Error:</strong>
<ul>
<li><strong>Bedeutung:</strong> Ein unerwarteter Fehler ist auf dem Server aufgetreten, der die Anfrage nicht verarbeiten konnte.</li>
<li><strong>Content-Type:</strong> <code>application/problem+json</code></li>
<li><strong>Beispiel Antwort:</strong></li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;https://httpstatuses.com/500&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Internal Server Error&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#ae81ff">500</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;detail&#34;</span>: <span style="color:#e6db74">&#34;An unexpected error occurred while processing your request.&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;instance&#34;</span>: <span style="color:#e6db74">&#34;/token&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="resource-endpoint">Resource Endpoint</h4>
<p>Der Resource Endpoint ist der Endpunkt, der von der geschützten Ressource (Protected Resource) bereitgestellt wird, um auf geschützte Daten zuzugreifen. Er ist durch den ZETA Guard PEP vor unberechtigtem Zugriff geschützt. Für den Zugriff auf die geschützte Ressource wird ein gültiges Access Token und ein gültiges <a href="https://www.rfc-editor.org/rfc/rfc9449.html">DPoP Proof</a> benötigt. Zusätzlich kann eine Anwendung ein gültiges <a href="https://gemspec.gematik.de/docs/gemSpec/gemSpec_ZETA/latest/#A_25669">PoPP Proof</a> erfordern.</p>
<p>Der Resource Endpoint unterstützt neben TLS eine zusätzliche Verschlüsselungsschicht <a href="https://gemspec.gematik.de/docs/gemSpec/gemSpec_Krypt/latest/#8">ZETA/ASL</a> (ZETA/Additional Security Layer).
Im <a href="#1511-oauth-protected-resource-well-known-endpoint">Well-Known JSON Dokument der geschützten Ressource</a> wird angegeben, ob der Endpunkt ZETA/ASL unterstützt. Der ZETA/ASL Kanal wird nach dem TLS Verbindungsaufbau aufgebaut und verwendet, um die Kommunikation zwischen Client und Resource Endpoint zu sichern.</p>
<h5 id="anfragen-4">Anfragen</h5>
<p>Der ZETA Guard PEP empfängt die Anfragen und prüft das Access Token im Authentication Header sowie das DPoP Proof im DPoP Header.</p>
<p><strong>HTTP Methode:</strong> wird durch die geschützte Ressource bestimmt (z.B. <code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>DELETE</code>).</p>
<p><strong>Pfad:</strong> wird durch die geschützte Ressource bestimmt (z.B. <code>/api/resource</code>).</p>
<p><strong>Content-Type:</strong> wird durch die geschützte Ressource bestimmt (z.B. <code>application/json</code>).</p>
<h5 id="antworten-5">Antworten</h5>
<p>Die Antwort des Resource Endpoints hängt von der geschützten Ressource ab und kann verschiedene Statuscodes und Datenformate zurückgeben.</p>
<h3 id="konnektorti-gateway-endpunkte">Konnektor/TI-Gateway Endpunkte</h3>
<p>Die Endpunkte im Konnektor oder im Highspeed Konnektoren des TI-Gateways werden für die Erstellung von Signaturen mit Der SM(C)-B sowie für die Abfrage des SM(C)-B Zertifikats während der Authentifizierung am ZETA Guard verwendet.</p>
<p><em>Hinweis: Perspektivisch ist vorgesehen, dass der Zugriff auf das TI-Gateway über den ZETA Guard erfolgt, um die Sicherheit und Integrität der Kommunikation zu gewährleisten. Während der Authentifizierung wird anstatt der SM(C)-B Identität eine TI-Gateway Identität verwendet.</em></p>
<h4 id="readcardcertificate">ReadCardCertificate</h4>
<p>Die Operation <a href="https://gemspec.gematik.de/docs/gemSpec/gemSpec_Kon/latest/#TIP1-A_4698-03">ReadCardCertificate</a> ist in der <a href="https://gemspec.gematik.de/docs/gemSpec/gemSpec_Kon/latest/index.html">Konnektor Spezifikation</a> definiert.</p>
<h4 id="externalauthenticate">ExternalAuthenticate</h4>
<p>Die Operation <a href="https://gemspec.gematik.de/docs/gemSpec/gemSpec_Kon/latest/#TIP1-A_4698-03">ExternalAuthenticate</a> ist in der <a href="https://gemspec.gematik.de/docs/gemSpec/gemSpec_Kon/latest/index.html">Konnektor Spezifikation</a> definiert.</p>
<h3 id="zeta-attestation-service-endpunkte">ZETA Attestation Service Endpunkte</h3>
<p>Der <code>ZetaAttestationService</code> stellt einen gRPC-Dienst zur Verfügung, der es stationären Clients (Primärsystem) ermöglicht, TPM-signierte Attestierungsinformationen für den Client abzurufen. Diese Informationen basieren auf Integritätsmessungen, die in ausgewählten Platform Configuration Registers (PCRs) des Trusted Platform Module (TPM) gespeichert sind. Der ZETA Guard Authorization Server verwendet diese Attestierungsdaten, um die Integrität und Authentizität der Softwareumgebung des Clients zu verifizieren, bevor Zugriff auf geschützte Ressourcen gewährt wird.</p>
<p>Der ZETA Attestation Service wird vom Hersteller des stationären Clients bereitgestellt und es muss eine Vertrauensbeziehung zwischen stationären Client und ZETA Attestation Service bestehen, um zu gewährleisten, dass die Attestation über die vorgesehenen Software-Komponenten erfolgt.</p>
<p><em>Hinweis:</em> Während der Installation oder bei Updates des stationären Clients muss auch ein Update des ZETA Attestation Service erfolgen um eine neue Baseline für die Integrität des stationären Clients zu setzen. Die Baseline besteht aus einem Hash über alle unveränderlichen Komponenten des stationären Clients, inkl. ZETA Attestation Service.</p>
<p><em>Hinweis:</em> Der ZETA Attestation Service muss bei jedem Start des Clients die Messung über die Integrität des Clients durchführen und in das PCR schreiben.</p>
<p><em>Hinweis:</em> Der ZETA Attestation Service ist nicht für mobile Clients vorgesehen. Mobile Clients verwenden eine andere Attestierungsmethode, die auf den jeweiligen Plattformen basiert (z.B. Android SafetyNet, iOS DeviceCheck).</p>
<p><em>Hinweis:</em> TODO Umgang mit Messung des Clients weicht von Baseline ab; empfohlenes Verhalten für Client und ZetaAttestationService (z. B. automatisch Support informieren)</p>
<h4 id="dienstdefinition">Dienstdefinition</h4>
<ul>
<li><strong>Service Name:</strong> <code>zeta.attestation.service.v1.ZetaAttestationService</code></li>
<li><strong>Proto Buffer Spezifikation:</strong> <a href="/src/gRPC/zeta-attestation-service.proto">zeta-attestation-service.proto</a></li>
</ul>
<h4 id="rpc-methoden">RPC Methoden</h4>
<h5 id="getattestation">GetAttestation</h5>
<p>Diese RPC-Methode ermöglicht es Clients, eine signierte Attestierungs-Quote vom TPM des Systems anzufordern, die spezifische PCR-Werte und eine vom Client bereitgestellte Challenge enthält.</p>
<h6 id="request-nachricht-getattestationrequest">Request-Nachricht: <code>GetAttestationRequest</code></h6>
<p>Die <code>GetAttestationRequest</code>-Nachricht enthält die Parameter, die für die Anforderung einer Attestierung benötigt werden.</p>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Feld</th>
          <th style="text-align: left">Typ</th>
          <th style="text-align: left">Erforderlich</th>
          <th style="text-align: left">Beschreibung</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>attestation_challenge</code></td>
          <td style="text-align: left"><code>bytes</code></td>
          <td style="text-align: left">Ja</td>
          <td style="text-align: left">Ein SHA-256 Hashwert, berechnet aus der Verkettung des SHA-256 Fingerabdrucks des Public Client Instance Keys und einer Nonce vom ZETA Guard Authorization Server. Dient zur Verhinderung von Replay-Angriffen und zur Korrelation.</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>pcr_indices</code></td>
          <td style="text-align: left"><code>repeated uint32</code></td>
          <td style="text-align: left">Ja</td>
          <td style="text-align: left">Eine Liste von TPM PCR-Indizes, deren aktuelle Werte in die Attestierungs-Quote aufgenommen und zurückgegeben werden sollen.</td>
      </tr>
  </tbody>
</table>
<hr>
<p><strong>Berechnung der <code>attestation_challenge</code></strong>:
Der Client ist für die korrekte Berechnung dieses Wertes verantwortlich.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ini" data-lang="ini"><span style="display:flex;"><span><span style="color:#a6e22e">data_to_hash</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">sha256_thumbprint_of_public_client_instance_key_bytes || nonce_from_zeta_guard_bytes</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">attestation_challenge</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">SHA-256(data_to_hash)</span>
</span></span></code></pre></div><p><strong>Beispiel (Python) für die Berechnung der <code>attestation_challenge</code>:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> hashlib
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Beispielwerte</span>
</span></span><span style="display:flex;"><span>thumbprint_hex <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;9f3d4f2a6c5e4e21d84c8a713d3c37cfb1a2f3a4b14ad9d8d8d9c0e7c8e7e6f5&#34;</span> <span style="color:#75715e"># SHA-256 Fingerabdruck</span>
</span></span><span style="display:flex;"><span>nonce_hex <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;a1b2c3d4e5f60718293a4b5c6d7e8f90&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>thumbprint_bytes <span style="color:#f92672">=</span> bytes<span style="color:#f92672">.</span>fromhex(thumbprint_hex)
</span></span><span style="display:flex;"><span>nonce_bytes <span style="color:#f92672">=</span> bytes<span style="color:#f92672">.</span>fromhex(nonce_hex)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>data_to_hash <span style="color:#f92672">=</span> thumbprint_bytes <span style="color:#f92672">+</span> nonce_bytes
</span></span><span style="display:flex;"><span>attestation_challenge_bytes <span style="color:#f92672">=</span> hashlib<span style="color:#f92672">.</span>sha256(data_to_hash)<span style="color:#f92672">.</span>digest() <span style="color:#75715e"># als Bytes</span>
</span></span><span style="display:flex;"><span>attestation_challenge_hex <span style="color:#f92672">=</span> hashlib<span style="color:#f92672">.</span>sha256(data_to_hash)<span style="color:#f92672">.</span>hexdigest() <span style="color:#75715e"># als Hex-String</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;attestation_challenge (hex): </span><span style="color:#e6db74">{</span>attestation_challenge_hex<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># In der gRPC Anfrage wird `attestation_challenge_bytes` verwendet.</span>
</span></span></code></pre></div><p><strong>Empfohlene PCR-Indizes:</strong></p>
<ul>
<li>PCR 4: Boot Loader Code, Digest</li>
<li>PCR 5: Boot Loader Configuration, Digest</li>
<li>PCR 7: Secure Boot State / Policy, Digest</li>
<li>PCR 10:OS Kernel / IMA, Digest</li>
<li>PCR 11: OS Components / VSM, Digest,</li>
<li>PCR 22 or 23 (if available) Client Data</li>
</ul>
<h6 id="response-nachricht-getattestationresponse">Response-Nachricht: <code>GetAttestationResponse</code></h6>
<p>Die <code>GetAttestationResponse</code>-Nachricht enthält die vom Dienst generierten Attestierungsdaten.</p>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Feld</th>
          <th style="text-align: left">Typ</th>
          <th style="text-align: left">Beschreibung</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>attestation_quote</code></td>
          <td style="text-align: left"><code>bytes</code></td>
          <td style="text-align: left">Die rohe, signierte Attestierungs-Quote des TPMs (eine TPM2_ATTEST Struktur). Diese Quote enthält die angefragten PCR-Werte sowie den <code>attestation_challenge</code> Wert. Muss clientseitig geparst werden.</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>current_pcr_values</code></td>
          <td style="text-align: left"><code>map&lt;uint32, bytes&gt;</code></td>
          <td style="text-align: left">Eine Abbildung der angefragten PCR-Indizes auf ihre aktuellen, gemessenen Werte. Die Länge der <code>bytes</code> hängt vom aktiven Hashing-Algorithmus der jeweiligen PCR-Bank ab (z.B. 20 Bytes für SHA-1, 32 Bytes für SHA-256).</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>status</code></td>
          <td style="text-align: left"><code>AttestationStatus</code> (enum)</td>
          <td style="text-align: left">Der vom ZETA Attestation Service intern ermittelte Status der Attestierung. Gibt an, ob die Messungen erfolgreich waren und ob sie ggf. einer definierten Baseline entsprechen.</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>status_message</code></td>
          <td style="text-align: left"><code>string</code> (optional)</td>
          <td style="text-align: left">Eine menschenlesbare Beschreibung des Attestierungsstatus oder zusätzliche Informationen, insbesondere im Fehlerfall oder bei einem <code>BASELINE_MISMATCH</code>.</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>timestamp</code></td>
          <td style="text-align: left"><code>google.protobuf.Timestamp</code> (optional)</td>
          <td style="text-align: left">Der Zeitstempel der Erstellung der Attestierungs-Quote durch den ZETA Attestation Service. Erfordert <code>import &quot;google/protobuf/timestamp.proto&quot;;</code>.</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>event_log</code></td>
          <td style="text-align: left"><code>bytes</code> (optional)</td>
          <td style="text-align: left">Das TPM-Event-Log im plattformspezifischen Format (z.B. TCG PC Client Platform Firmware Profile Specification). Dieses Log detailliert die Sequenz der Erweiterungen der PCRs und ist essentiell für eine vollständige Validierung.</td>
      </tr>
  </tbody>
</table>
<p><strong>AttestationStatus Enum:</strong></p>
<p>Definiert die möglichen Statuswerte für die Attestierung, die vom ZETA Attestation Service zurückgegeben werden.</p>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Wert</th>
          <th style="text-align: left">Numerischer Wert</th>
          <th style="text-align: left">Beschreibung</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>ATTESTATION_STATUS_UNSPECIFIED</code></td>
          <td style="text-align: left">0</td>
          <td style="text-align: left">Der Status ist nicht spezifiziert oder konnte nicht ermittelt werden. Dies sollte als Fehler interpretiert werden.</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>ATTESTATION_STATUS_SUCCESS</code></td>
          <td style="text-align: left">1</td>
          <td style="text-align: left">Die Attestierung war erfolgreich, die Quote wurde generiert und (falls eine Baseline-Prüfung serverseitig erfolgt) die Messungen entsprechen der Baseline.</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>ATTESTATION_STATUS_BASELINE_MISMATCH</code></td>
          <td style="text-align: left">2</td>
          <td style="text-align: left">Die Attestierung war technisch erfolgreich, aber die aktuellen PCR-Messwerte weichen von der erwarteten Baseline ab.</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>ATTESTATION_STATUS_TPM_ERROR</code></td>
          <td style="text-align: left">3</td>
          <td style="text-align: left">Ein Fehler ist bei der Kommunikation mit dem TPM oder bei einer TPM-Operation aufgetreten (z.B. TPM nicht bereit, PCR nicht lesbar).</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>ATTESTATION_STATUS_INVALID_REQUEST</code></td>
          <td style="text-align: left">4</td>
          <td style="text-align: left">Die Anfrageparameter waren ungültig (z.B. <code>attestation_challenge</code> fehlt oder hat falsches Format, ungültige oder nicht unterstützte <code>pcr_indices</code>).</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>ATTESTATION_STATUS_INTERNAL_ERROR</code></td>
          <td style="text-align: left">5</td>
          <td style="text-align: left">Ein interner, nicht näher spezifizierter Fehler ist auf Serverseite aufgetreten.</td>
      </tr>
  </tbody>
</table>
<hr>
<h6 id="fehlerbehandlung">Fehlerbehandlung</h6>
<p>Der <code>ZetaAttestationService</code> verwendet standardmäßige gRPC-Statuscodes, um das Ergebnis der Operation auf Transportebene zu kommunizieren. Diese werden ergänzt durch den <code>status</code>-Feld in der <code>GetAttestationResponse</code> für anwendungsspezifische Logik. Die <code>google.rpc.Status</code> kann für detailliertere Fehlerinformationen verwendet werden (siehe <code>import &quot;google/rpc/status.proto&quot;;</code>).</p>
<p>Häufige gRPC-Statuscodes:</p>
<ul>
<li><strong><code>OK</code> (0):</strong> Die Anfrage war erfolgreich und die <code>GetAttestationResponse</code> enthält die Ergebnisse. Der <code>status</code>-Feld in der Response gibt den anwendungsspezifischen Erfolg oder Misserfolg an.</li>
<li><strong><code>INVALID_ARGUMENT</code> (3):</strong>
<ul>
<li>Einer oder mehrere Parameter der Anfrage waren ungültig.</li>
<li>Beispiele: <code>attestation_challenge</code> fehlt, hat eine falsche Länge oder ein ungültiges Format; <code>pcr_indices</code> ist leer, enthält ungültige oder nicht unterstützte Indizes.</li>
<li>Der <code>status</code> in der Response könnte <code>ATTESTATION_STATUS_INVALID_REQUEST</code> sein.</li>
</ul>
</li>
<li><strong><code>UNAUTHENTICATED</code> (16) / <code>PERMISSION_DENIED</code> (7):</strong>
<ul>
<li>Der anfragende Client ist nicht authentifiziert oder nicht   autorisiert, diese Anfrage zu stellen.</li>
<li>Relevant, wenn Mechanismen wie mTLS oder Token-basierte   Authentifizierung verwendet werden.</li>
</ul>
</li>
<li><strong><code>UNAVAILABLE</code> (14):</strong>
<ul>
<li>Der ZETA Attestation Service kann die Attestierung derzeit nicht   durchführen.</li>
<li>Beispiele: TPM ist nicht erreichbar oder nicht funktionsfähig;   eine erforderliche Baseline-Konfiguration ist nicht vorhanden.</li>
<li>Der <code>status</code> in der Response könnte   <code>ATTESTATION_STATUS_TPM_ERROR</code> oder   <code>ATTESTATION_STATUS_INTERNAL_ERROR</code> sein.</li>
</ul>
</li>
<li><strong><code>INTERNAL</code> (13):</strong>
<ul>
<li>Ein unerwarteter serverseitiger Fehler ist aufgetreten, der   nicht spezifischer kategorisiert werden kann.</li>
<li>Der <code>status</code> in der Response ist typischerweise   <code>ATTESTATION_STATUS_INTERNAL_ERROR</code>.</li>
</ul>
</li>
</ul>
<h6 id="sicherheitsaspekte">Sicherheitsaspekte</h6>
<ul>
<li><strong>Transport-Sicherheit:</strong> Es wird dringend empfohlen, die Kommunikation zwischen Client und <code>ZetaAttestationService</code> mittels TLS, vorzugsweise mTLS (mutual TLS), abzusichern, um Authentizität, Integrität und Vertraulichkeit der übertragenen Daten zu gewährleisten.
<em>Hinweis: Es wird empfohlen, dass der Installer des Clients und des ZetaAttestationService die Schlüssel für die mTLS Verbindung erzeugt und sicher speichert.</em></li>
<li><strong>Challenge-Response:</strong> Die <code>attestation_challenge</code> ist ein kritischer Bestandteil zur Verhinderung von Replay-Angriffen. Die <code>nonce</code> muss für jede Attestierungsanfrage eindeutig sein und sicher vom ZETA Guard Authorization Server generiert und an den Client übermittelt werden.</li>
<li><strong>Event Log Validierung:</strong> Die alleinige Überprüfung der PCR-Werte ist oft nicht ausreichend. Eine gründliche Validierung der Attestierung erfordert das Parsen und Überprüfen des <code>event_log</code>, um die Kausalkette der Messungen nachzuvollziehen. Dies erfolgt im ZETA Guard Authorization Server.</li>
</ul>
<hr>
<h2 id="verwaltung-von-schlüsseln-und-session-daten-im-zeta-client">Verwaltung von Schlüsseln und Session-Daten im ZETA Client</h2>
<h3 id="einleitung">Einleitung</h3>
<p>Ein ZETA Client muss verschiedene kryptografische Schlüssel und Session-Informationen verwalten, um mit einer oder mehreren ZETA Guard Instanzen sicher und persistent kommunizieren zu können. Die Speicherung und Verwaltung dieser Daten ist kritisch für die Sicherheit und Funktionalität des Clients.</p>
<p>Es wird zwischen zwei Arten von Daten unterschieden:</p>
<ol>
<li><strong>Globale Daten:</strong> Diese sind übergreifend für die Client-Instanz und unabhängig von einer spezifischen ZETA Guard Instanz.</li>
<li><strong>Pro-ZETA-Guard-Instanz Daten:</strong> Diese Daten sind spezifisch für die Session mit einer einzelnen ZETA Guard Instanz.</li>
</ol>
<h4 id="globale-daten-client-übergreifend">Globale Daten (Client-übergreifend)</h4>
<p>Diese Daten definieren die langlebige Identität der Client-Anwendung selbst. Sie müssen persistent über alle Sessions und Neustarts der Anwendung hinweg gespeichert werden.</p>
<ul>
<li><code>Client Instance Key</code> (Asymmetrisches Schlüsselpaar)
<ul>
<li><strong>Beschreibung:</strong> Dies ist das Hauptschlüsselpaar des Clients. Der private Schlüssel wird zur Signierung der Client-Registrierung bei neuen ZETA Guard Instanzen und zur Client Assertion Authentifizierung verwendet. Der öffentliche Schlüssel dient als eindeutiger, kryptografischer Identifikator des Clients.</li>
<li><strong>Speicheranforderung:</strong> Dieses Schlüsselpaar <strong>muss</strong> einmalig bei der ersten Initialisierung des Clients generiert und anschließend sicher und persistent gespeichert werden. Ein Verlust des privaten Schlüssels bedeutet, dass der Client seine Identität verliert und sich bei allen bereits bekannten ZETA Guard Instanzen neu registrieren muss.</li>
<li><strong>Sicherheit:</strong> Der private Schlüssel ist das wertvollste Geheimnis des Clients und <strong>darf niemals</strong> im Klartext gespeichert werden. Siehe Kapitel <a href="#164-sicherheitsempfehlungen-f%C3%BCr-die-schl%C3%BCsselspeicherung">1.6.4 Sicherheitsempfehlungen für die Schlüsselspeicherung</a>.</li>
</ul>
</li>
</ul>
<h4 id="daten-pro-zeta-guard-instanz">Daten pro ZETA Guard Instanz</h4>
<p>Für jede ZETA Guard Instanz, mit der der Client eine Verbindung aufbaut, müssen die folgenden Daten separat und zugeordnet zur jeweiligen ZETA Guard-Instanz (z.B. über deren Basis-URL) gespeichert werden.</p>
<ul>
<li>
<p><code>DPoP Key</code> (Asymmetrisches Schlüsselpaar)</p>
<ul>
<li><strong>Beschreibung:</strong> Für jede aktive Session mit einer ZETA Guard Instanz wird ein eigenes, kurzlebiges Schlüsselpaar generiert. Der private Schlüssel wird verwendet, um einzelne API-Anfragen an den Guard zu signieren (<code>DPoP</code>).</li>
<li><strong>Speicheranforderung:</strong> Dieses Schlüsselpaar ist nur für die Dauer einer Session gültig. Es sollte sicher gespeichert, aber nach Beendigung der Session (z.B. durch Logout oder Token-Ablauf ohne Refresh-Möglichkeit) verworfen werden.</li>
<li><strong>Sicherheit:</strong> Auch dieser private Schlüssel muss für seine Lebensdauer sicher aufbewahrt werden.</li>
</ul>
</li>
<li>
<p><code>Access Token</code></p>
<ul>
<li><strong>Beschreibung:</strong> Das vom Authorization Server des ZETA Guards ausgestellte OAuth 2.0 Access Token. Es wird im <code>Authorization</code>-Header bei jeder authentifizierten API-Anfrage mitgesendet.</li>
<li><strong>Speicheranforderung:</strong> Dieses Token ist kurzlebig und muss nach Ablauf erneuert werden. Es kann im Arbeitsspeicher gehalten oder persistent gespeichert werden, um nach einem Neustart der Anwendung die Session wiederaufnehmen zu können. Es besteht ein Diebstahlschutz durch die Bindung an den DPoP Schlüssel.</li>
</ul>
</li>
<li>
<p><code>Refresh Token</code></p>
<ul>
<li><strong>Beschreibung:</strong> Das vom Authorization Server des ZETA Guards ausgestellte OAuth 2.0 Refresh Token. Dieses Token kann verwendet werden, um ein neues Access Token zu erhalten, ohne dass der Benutzer sich erneut authentifizieren muss.</li>
<li><strong>Speicheranforderung:</strong> Das Refresh Token ist langlebiger als das Access Token und stellt einen sensiblen Berechtigungsnachweis dar. Es sollte persistent und sicher gespeichert werden. Es besteht ein Diebstahlschutz durch die Bindung an den DPoP Schlüssel.</li>
</ul>
</li>
<li>
<p><code>Client ID</code></p>
<ul>
<li><strong>Beschreibung:</strong> Die eindeutige ID, die der ZETA Guard dem ZETA Client während des Registrierungsprozesses zugewiesen hat. Sie wird für die Token-Anforderung benötigt.</li>
<li><strong>Speicheranforderung:</strong> Muss persistent gespeichert werden, solange die Registrierung beim ZETA Guard gültig sein soll.</li>
</ul>
</li>
<li>
<p><strong>Discovery-Dokument Daten (Well-Known)</strong></p>
<ul>
<li><strong>Beschreibung:</strong> Die Endpunkt-URLs und Konfigurationsdaten aus den Discovery-Dokumenten des ZETA Guards.</li>
<li><strong>Speicheranforderung:</strong> Es wird dringend empfohlen, diese Daten zu cachen, um wiederholte Discovery-Anfragen zu vermeiden. Der Cache sollte eine angemessene Lebensdauer haben (z.B. 24 Stunden), um auf Konfigurationsänderungen am Guard reagieren zu können.</li>
</ul>
</li>
</ul>
<h4 id="konzeptionelles-speicherlayout">Konzeptionelles Speicherlayout</h4>
<p>Ein ZETA Client könnte die Daten konzeptionell wie folgt strukturieren:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;client_instance_private_key&#34;</span>: <span style="color:#e6db74">&#34;geschützter_speicher_ref&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;guard_sessions&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;https://guard1.example.com&#34;</span>: {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;client_id&#34;</span>: <span style="color:#e6db74">&#34;client-id-beim-zeta-guard-1&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;session_private_key&#34;</span>: <span style="color:#e6db74">&#34;geschützter_speicher_ref&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;access_token&#34;</span>: <span style="color:#e6db74">&#34;ey...&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;refresh_token&#34;</span>: <span style="color:#e6db74">&#34;def...&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;discovery_cache&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;expires_at&#34;</span>: <span style="color:#e6db74">&#34;2024-12-01T10:00:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;data&#34;</span>: {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;token_endpoint&#34;</span>: <span style="color:#e6db74">&#34;...&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;jwks_uri&#34;</span>: <span style="color:#e6db74">&#34;...&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;https://guard2.another-provider.de&#34;</span>: {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;client_id&#34;</span>: <span style="color:#e6db74">&#34;client-id-beim-zeta-guard-2&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;session_private_key&#34;</span>: <span style="color:#e6db74">&#34;...&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;access_token&#34;</span>: <span style="color:#e6db74">&#34;...&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;refresh_token&#34;</span>: <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;discovery_cache&#34;</span>: { <span style="color:#960050;background-color:#1e0010">...</span> }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="sicherheitsempfehlungen-für-die-schlüsselspeicherung">Sicherheitsempfehlungen für die Schlüsselspeicherung</h3>
<p>Private Schlüssel (<code>Client Instance Key</code>, <code>DPoP Key</code>) sind hochsensible Daten. Ihre Kompromittierung ermöglicht es einem Angreifer, die Identität des Clients zu missbrauchen. Sie müssen daher mit den sichersten, vom jeweiligen Betriebssystem bereitgestellten Mitteln geschützt werden.</p>
<p><strong>Grundprinzip:</strong> Speichern Sie private Schlüssel <strong>niemals</strong> unverschlüsselt im Dateisystem oder in einer Klartext-Konfigurationsdatei.</p>
<p>Nutzen Sie stattdessen plattformspezifische, sichere Speicherorte (sog. &ldquo;Keystores&rdquo; oder &ldquo;Secret Vaults&rdquo;), die die Schlüssel an das Benutzerkonto oder die Maschinenidentität binden.</p>
<ul>
<li>
<p><strong>Microsoft Windows:</strong></p>
<ul>
<li><strong>Empfehlung:</strong> Verwenden Sie die <strong>Data Protection API (DPAPI)</strong>, die über die Funktionen <code>CryptProtectData</code> und <code>CryptUnprotectData</code> zugänglich ist.</li>
<li><strong>Funktionsweise:</strong> DPAPI verschlüsselt Daten mithilfe eines Schlüssels, der aus den Anmeldeinformationen des Benutzers abgeleitet wird. Die Daten können somit nur von demselben Benutzer auf demselben Computer wieder entschlüsselt werden. Dies ist ideal für Desktop-Anwendungen. Für Dienste, die unter einem Systemkonto laufen, kann der Schutz an die Maschinenidentität gebunden werden.</li>
</ul>
</li>
<li>
<p><strong>Apple macOS:</strong></p>
<ul>
<li><strong>Empfehlung:</strong> Nutzen Sie den <strong>macOS Keychain (Schlüsselbund)</strong>.</li>
<li><strong>Funktionsweise:</strong> Der Schlüsselbund ist ein zentraler, verschlüsselter Speicher für Passwörter, Zertifikate und Schlüssel. Der Zugriff wird vom Betriebssystem streng kontrolliert und erfordert in der Regel die Zustimmung des Benutzers. Verwenden Sie die <code>Security</code> Framework-APIs, um Schlüssel sicher zu speichern und abzurufen.</li>
</ul>
</li>
<li>
<p><strong>Linux:</strong></p>
<ul>
<li><strong>Empfehlung (Desktop-Umgebungen):</strong> Verwenden Sie den <strong>Secret Service DBus API</strong>, der von Diensten wie dem <em>GNOME Keyring</em> oder <em>KWallet</em> implementiert wird. Dies ist der Freedesktop.org-Standard und die bevorzugte Methode für Desktop-Anwendungen.</li>
<li><strong>Empfehlung (Server/Headless-Umgebungen):</strong>
1. <strong>Dateibasierte Verschlüsselung:</strong> Speichern Sie den Schlüssel in einer Datei, die mit einem Master-Passwort verschlüsselt ist (das z.B. beim Start der Anwendung abgefragt wird).
2. <strong>Strikte Dateiberechtigungen:</strong> Als absolutes Minimum muss die Schlüsseldatei durch strikte Dateisystemberechtigungen geschützt werden. Der private Schlüssel sollte nur für den Benutzer lesbar sein, unter dem die Anwendung läuft.
<code>bash # Setzt die Berechtigung, sodass nur der Eigentümer lesen und schreiben darf chmod 600 /pfad/zum/privaten_schluessel.key </code>
Diese Methode bietet jedoch keinen Schutz, wenn ein Angreifer Lesezugriff auf das Dateisystem als der betreffende Benutzer erlangt. Sie sollte möglichst mit zusätzlicher Verschlüsselung kombiniert werden.</li>
</ul>
</li>
</ul>
<p><strong>Cross-Plattform-Bibliotheken:</strong> Für in höheren Programmiersprachen (z.B. Python, Go, Rust, C#) entwickelte Clients existieren oft Bibliotheken, die die plattformspezifischen Speicher abstrahieren und eine einheitliche API für den Zugriff auf den Windows DPAPI, den macOS Keychain und den Secret Service unter Linux bieten. Die Verwendung solcher Bibliotheken wird empfohlen.</p>
<h2 id="versionierung">Versionierung</h2>
<p>Um eine stabile und vorhersagbare Entwicklungsumgebung für Client-Anwendungen zu gewährleisten, folgt die ZETA API strikt den Prinzipien von <strong>Semantic Versioning 2.0.0 (SemVer)</strong>. Jede Änderung an der API wird klassifiziert, um die Auswirkungen auf bestehende Clients transparent zu machen.</p>
<h3 id="versionierungsschema-majorminorpatch">Versionierungsschema: MAJOR.MINOR.PATCH</h3>
<p>Jede ZETA Guard Instanz deklariert ihre API-Version im Format <code>MAJOR.MINOR.PATCH</code> (z.B. <code>1.2.3</code>). Die Bedeutung der einzelnen Komponenten ist wie folgt definiert:</p>
<ul>
<li>
<p><strong>MAJOR-Version (z.B. <code>1</code>.2.3):</strong> Wird erhöht, wenn <strong>rückwärtsinkompatible (&ldquo;breaking&rdquo;) Änderungen</strong> an der API vorgenommen werden. Dies erfordert eine Anpassung aufseiten des Clients, um weiterhin korrekt zu funktionieren.</p>
<ul>
<li><em>Beispiele:</em> Entfernen eines Endpunkts, Umbenennung eines JSON-Feldes, Änderung eines Felddatentyps, Hinzufügen eines verpflichtenden Request-Parameters.</li>
</ul>
</li>
<li>
<p><strong>MINOR-Version (z.B. 1.<code>2</code>.3):</strong> Wird erhöht, wenn <strong>neue Funktionalität in einer rückwärtskompatiblen Weise</strong> hinzugefügt wird. Bestehende Clients dürfen durch diese Änderungen nicht beeinträchtigt werden.</p>
<ul>
<li><em>Beispiele:</em> Hinzufügen eines neuen API-Endpunkts, Hinzufügen eines neuen, optionalen Feldes in einer JSON-Antwort, Hinzufügen eines neuen, optionalen Request-Parameters.</li>
</ul>
</li>
<li>
<p><strong>PATCH-Version (z.B. 1.2.<code>3</code>):</strong> Wird erhöht, wenn <strong>rückwärtskompatible Fehlerbehebungen (&ldquo;bug fixes&rdquo;)</strong> vorgenommen werden, die das Verhalten der API korrigieren, aber keine neue Funktionalität einführen.</p>
<ul>
<li><em>Beispiele:</em> Korrektur einer fehlerhaften Validierungslogik, Behebung eines internen Fehlers, der zu einem <code>500 Internal Server Error</code> führte.</li>
</ul>
</li>
</ul>
<p>Zusätzlich können Prerelease-Tags verwendet werden (z.B. <code>2.0.0-beta.1</code>), um instabile Vorabversionen zu kennzeichnen.</p>
<h4 id="implementierung-der-versionierung">Implementierung der Versionierung</h4>
<p>Die Versionierung wird durch eine Kombination aus URL-Pfad, HTTP-Headern und dem Discovery-Dokument umgesetzt.</p>
<h5 id="1-url-pfad-für-die-major-version">1. URL-Pfad für die MAJOR-Version</h5>
<p>Rückwärtsinkompatible Änderungen sind am einschneidendsten. Daher wird die <strong>MAJOR-Version</strong> direkt und explizit im URL-Pfad der API geführt.</p>
<ul>
<li><strong>Schema:</strong> <code>https://&lt;guard-base-url&gt;/zeta/v{major-version}/&lt;endpoint&gt;</code></li>
<li><strong>Beispiel für Version <code>1.4.2</code>:</strong> <code>POST https://guard.example.com/zeta/v1/token</code></li>
<li><strong>Beispiel für Version <code>2.0.0</code>:</strong> <code>POST https://guard.example.com/zeta/v2/token</code></li>
</ul>
<h5 id="2-discovery-dokument-als-source-of-truth">2. Discovery-Dokument als &ldquo;Source of Truth&rdquo;</h5>
<p>Die Discovery-Dokumente (<code>/.well-known/oauth-protected-resource</code> und <code>/.well-known/oauth-authorization-server</code>) sind die zentrale Anlaufstelle für einen Client, um die exakten, vom ZETA Guard unterstützten Versionen zu ermitteln.</p>
<ul>
<li><strong><code>api_versions_supported</code>:</strong> Dieses JSON-Objekt listet alle vom ZETA Guard angebotenen MAJOR-Versionen mit ihrer jeweiligen vollen SemVer-Version auf.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#75715e">// Beispiel-Ausschnitt aus /.well-known/...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;issuer&#34;</span>: <span style="color:#e6db74">&#34;https://zeta-guard.example.com&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// ... andere Endpunkte
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#f92672">&#34;api_versions_supported&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;major_version&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;1.4.2&#34;</span>, <span style="color:#75715e">// Die volle, stabile SemVer-Version für v1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;stable&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;documentation_uri&#34;</span>: <span style="color:#e6db74">&#34;https://gematik.github.io/ZETA/v1/&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;major_version&#34;</span>: <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;2.0.0-beta.3&#34;</span>, <span style="color:#75715e">// Eine instabile Vorabversion für v2
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;beta&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;documentation_uri&#34;</span>: <span style="color:#e6db74">&#34;https://gematik.github.io/ZETA/v2/&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h5 id="3-http-header-zur-laufzeit-identifikation">3. HTTP-Header zur Laufzeit-Identifikation</h5>
<p>Jede Antwort des ZETA Guards enthält einen <code>ZETA-API-Version</code>-Header, der die exakte SemVer-Version der ausführenden Instanz angibt. Dies ist besonders für Debugging und Logging wertvoll.</p>
<ul>
<li><strong>Beispiel-Response-Header:</strong>
<code>HTTP/1.1 200 OK</code>
<code>Content-Type: application/json</code>
<code>ZETA-API-Version: 1.4.2</code></li>
</ul>
<h4 id="client-verhalten-und-kompatibilitätsregeln">Client-Verhalten und Kompatibilitätsregeln</h4>
<p>Um die Stabilität zu gewährleisten, müssen Clients die folgenden Regeln befolgen:</p>
<ol>
<li>
<p><strong>Toleranz gegenüber MINOR- und PATCH-Versionen:</strong> Ein Client, der für eine bestimmte API-Version entwickelt wurde (z.B. <code>1.2.0</code>), <strong>muss</strong> nahtlos mit jeder neueren, rückwärtskompatiblen Version derselben MAJOR-Version (z.B. <code>1.3.0</code> oder <code>1.2.1</code>) funktionieren. Dies bedeutet konkret:</p>
<ul>
<li><strong>Unbekannte Felder ignorieren:</strong> Der Client-Parser <strong>muss</strong> unbekannte Felder in JSON-Antworten ignorieren und darf keinen Fehler auslösen.</li>
<li><strong>Reihenfolgeunabhängigkeit:</strong> Der Client darf sich nicht auf die Reihenfolge von Feldern in JSON-Objekten verlassen.</li>
</ul>
</li>
<li>
<p><strong>Explizite Wahl der MAJOR-Version:</strong> Der Client wählt die MAJOR-Version aktiv über den verwendeten URL-Pfad (z.B. <code>/v1/</code>). Ein Wechsel zu einer neuen MAJOR-Version (z.B. auf <code>/v2/</code>) ist eine bewusste Entwicklungsentscheidung und erfordert eine Code-Anpassung.</p>
</li>
</ol>
<h4 id="deprecation-policy-außerbetriebnahme">Deprecation Policy (Außerbetriebnahme)</h4>
<p>Wenn eine neue MAJOR-Version (z.B. <code>v2</code>) den Status <code>stable</code> erreicht, wird die vorherige MAJOR-Version (<code>v1</code>) als <code>deprecated</code> (veraltet) markiert.</p>
<ol>
<li><strong>Ankündigungsphase:</strong> Die veraltete Version wird im Discovery-Dokument als <code>deprecated</code> gekennzeichnet. Anfragen an diese Version können einen <code>Warning</code>-HTTP-Header zurückgeben, der auf die bevorstehende Abschaltung hinweist.</li>
<li><strong>Migrationszeitraum:</strong> Es wird einen klar kommunizierten Zeitraum geben, in dem beide MAJOR-Versionen parallel betrieben werden, um Clients eine reibungslose Migration zu ermöglichen. Zusätzlich wird überwacht, welche ZETA Client-Versionen aktiv sind, um die Migration zu unterstützen.</li>
<li><strong>Abschaltung:</strong> Nach Ablauf des Migrationszeitraums und wenn die Überwachung der ZETA Clients ergeben hat, dass keine veralteten Clients mehr aktiv genutzt werden, wird die veraltete Version abgeschaltet. Anfragen an die Endpunkte dieser Version führen dann zu einem <code>HTTP 410 Gone</code>-Fehler.</li>
</ol>
<h2 id="performance--und-lastannahmen">Performance- und Lastannahmen</h2>
<p>Informationen zu den erwarteten Leistungs- und Lastannahmen für die ZETA API werden nachgereicht.</p>
<ul>
<li>SM(C)-B Signaturerstellung</li>
<li>TPM Attestation</li>
<li>ZETA Guard Clientregistrierung</li>
<li>ZETA Guard Authentifizierung</li>
<li>ZETA Guard Refresh Token Exchange</li>
<li>ZETA Guard PEP</li>
</ul>
<h2 id="rate-limits-und-einschränkungen">Rate Limits und Einschränkungen</h2>
<p>Der OAuth Protected Resource Well-Known Endpoint ist so konfiguriert, dass er eine Rate-Limiting-Strategie implementiert. Der ZETA Client muss die Rate Limits beachten, um eine Überlastung des Endpunkts zu vermeiden. Die genauen Limits können je nach Implementierung variieren, aber typischerweise gelten folgende Richtlinien:</p>
<ul>
<li>X-RateLimit-Limit</li>
<li>X-RateLimit-Remaining</li>
<li>X-RateLimit-Reset</li>
</ul>
<p>oder:</p>
<ul>
<li>RateLimit-Policy</li>
<li>RateLimit</li>
</ul>
<p><strong>Beispiele:</strong> <a href="https://www.ietf.org/archive/id/draft-ietf-httpapi-ratelimit-headers-09.html#name-ratelimit-policy-field">Draft RFC für Rate Limits</a></p>
<h2 id="support-und-kontaktinformationen">Support und Kontaktinformationen</h2>
<p>Hilfe: Informationen darüber, wo und wie Benutzer Unterstützung erhalten können (z.B. Forum, E-Mail-Support).
Fehlerberichterstattung: Wie können Nutzer Bugs melden oder Feature-Anfragen stellen?</p>

      </main>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        
      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        
      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/hugo-api-poc/js/main.js"></script>
<script defer src="/hugo-api-poc/js/click-to-copy.js" crossorigin="anonymous"></script>
<script src='/hugo-api-poc/js/tabpane-persist.js'></script>

  </body>
</html>